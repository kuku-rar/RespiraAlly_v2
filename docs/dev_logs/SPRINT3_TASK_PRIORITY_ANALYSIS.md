# Sprint 3 ä»»å‹™å„ªå…ˆç´šåˆ†æ (Task Priority Analysis)

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2025-10-23
**ç‹€æ…‹**: å¯¦ä½œå‰å„ªå…ˆç´šè©•ä¼°
**ç›®çš„**: ç¢ºå®š Sprint 3 ä»»å‹™çš„æœ€ä½³å¯¦ä½œé †åº

---

## ğŸ“‹ åŸ·è¡Œæ‘˜è¦ (Executive Summary)

### ğŸ¯ æ¨è–¦å¯¦ä½œé †åº

åŸºæ–¼ä¾è³´é—œä¿‚ã€é¢¨éšªã€åƒ¹å€¼èˆ‡é—œéµè·¯å¾‘åˆ†æï¼š

```
ç¬¬ä¸€éšæ®µ (Week 5, Day 1-2, 16h) - é—œéµåŸºç¤è¨­æ–½
â”œâ”€ ğŸ”´ P0: Task 5.1.1 - API Hooks èˆ‡åŸºç¤æ¶æ§‹ [16h]
â”‚  â””â”€ ç†ç”±: å¾ŒçºŒæ‰€æœ‰åŠŸèƒ½çš„ä¾è³´åŸºç¤

ç¬¬äºŒéšæ®µ (Week 5, Day 2-4, 16h) - æ ¸å¿ƒå±•ç¤ºåŠŸèƒ½
â”œâ”€ ğŸ”´ P0: Task 5.1.2 - PatientHeader + PatientTabs [8h]
â””â”€ ğŸ”´ P0: Task 5.1.4 - éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦ [8h]
   â””â”€ ç†ç”±: æ ¸å¿ƒæ²»ç™‚å¸«å·¥ä½œæµï¼Œå¿…é ˆç©©å®š

ç¬¬ä¸‰éšæ®µ (Week 6, Day 1-2, 16h) - ç—…æ‚£äº’å‹•æ ¸å¿ƒ
â”œâ”€ ğŸ”´ P0: Task 5.3.1 - LIFF æ¶æ§‹ + useTTS Hook [8h]
â””â”€ ğŸ”´ P0: Task 5.3.2 - CAT å•å· UI [8h]
   â””â”€ ç†ç”±: ç—…æ‚£å¡«ç­”æ ¸å¿ƒåŠŸèƒ½

ç¬¬å››éšæ®µ (Week 6, Day 3-4, 16h) - åŠŸèƒ½å®Œå–„
â”œâ”€ ğŸ”´ P0: Task 5.3.3 - mMRC + çµæœé  [8h]
â””â”€ ğŸ”´ P0: Task 5.3.4 - è¡¨å–®é©—è­‰èˆ‡ TTS æ¸¬è©¦ [8h]
   â””â”€ ç†ç”±: å®Œæ•´å•å·æµç¨‹é©—è­‰

ç¬¬äº”éšæ®µ (Week 6, Day 5, 8h) - ç„¡éšœç¤™åŠ åˆ†
â””â”€ ğŸŸ¡ P1: Task 5.6 - CAT TTS å®Œæ•´æ•´åˆ [8h]
   â””â”€ ç†ç”±: ç„¡éšœç¤™åŠ åˆ†é …ï¼Œç¨ç«‹åŠŸèƒ½

å¯é¸éšæ®µ (æ™‚é–“å…è¨±)
â””â”€ ğŸŸ¢ P2: Task 5.4 - è¶¨å‹¢åœ–è¡¨å…ƒä»¶ [16h]
   â””â”€ ç†ç”±: éŒ¦ä¸Šæ·»èŠ±ï¼Œå¯å»¶å¾Œè‡³ Sprint 4
```

**æ ¸å¿ƒçµè«–**: å…ˆå®Œæˆ API åŸºç¤ â†’ æ²»ç™‚å¸« 360Â° è¦–åœ– â†’ ç—…æ‚£å•å· â†’ TTS ç„¡éšœç¤™ â†’ (å¯é¸) è¶¨å‹¢åœ–è¡¨

---

## ğŸ” å¤šç¶­åº¦åˆ†æçŸ©é™£

### 1ï¸âƒ£ ä¾è³´é—œä¿‚åˆ†æ (Dependency Analysis)

| ä»»å‹™ | ä¾è³´æ–¼ | è¢«ä¾è³´æ–¼ | é—œéµè·¯å¾‘ | å„ªå…ˆç´š |
|------|--------|----------|----------|--------|
| **5.1.1 API Hooks** | Survey API (âœ… å·²å®Œæˆ) | 5.1.2, 5.1.3 | âœ… | **P0 - æœ€é«˜** |
| **5.1.2 PatientHeader/Tabs** | 5.1.1 | 5.1.3 | âœ… | **P0 - é«˜** |
| **5.1.3 DailyLogsTrendChart** | 5.1.1 | - | âŒ | P2 - å¯å»¶å¾Œ |
| **5.1.4 éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦** | 5.1.2 | - | âœ… | **P0 - é«˜** |
| **5.3.1 LIFF æ¶æ§‹ + useTTS** | - (ç¨ç«‹) | 5.3.2, 5.3.3 | âœ… | **P0 - é«˜** |
| **5.3.2 CAT å•å· UI** | 5.3.1, useTTS | 5.3.4 | âœ… | **P0 - é«˜** |
| **5.3.3 mMRC + çµæœé ** | 5.3.1 | 5.3.4 | âœ… | **P0 - é«˜** |
| **5.3.4 è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦** | 5.3.2, 5.3.3 | - | âœ… | **P0 - é«˜** |
| **5.6 CAT TTS å®Œæ•´æ•´åˆ** | useTTS Hook | - | âŒ | P1 - ä¸­ |
| **5.4 è¶¨å‹¢åœ–è¡¨å…ƒä»¶** | 5.1.1 (API Hooks) | - | âŒ | P2 - ä½ |

**é—œéµç™¼ç¾**:
- âœ… **5.1.1 æ˜¯æ•´å€‹ Sprint 3 çš„é—œéµåŸºç¤** - æ‰€æœ‰ Dashboard åŠŸèƒ½éƒ½ä¾è³´å®ƒ
- âœ… **5.3.1 æ˜¯ LIFF çš„é—œéµåŸºç¤** - useTTS Hook å¿…é ˆå…ˆå®Œæˆ
- âŒ **5.4 å’Œ 5.1.3 ä¸åœ¨é—œéµè·¯å¾‘ä¸Š** - å¯ä»¥å»¶å¾Œæˆ–å¹³è¡Œè™•ç†

---

### 2ï¸âƒ£ æŠ€è¡“é¢¨éšªè©•ä¼° (Risk Assessment)

| ä»»å‹™ | æŠ€è¡“é¢¨éšª | é¢¨éšªå› ç´  | ç·©è§£ç­–ç•¥ | é¢¨éšªç­‰ç´š |
|------|----------|----------|----------|----------|
| **5.1.1 API Hooks** | ğŸŸ¡ ä¸­ | TanStack Query 5 æ•´åˆï¼ŒéŒ¯èª¤è™•ç† | åƒè€ƒ ADR-012 æ¨¡å¼ï¼Œæ—©æœŸæ¸¬è©¦ | **éœ€æ—©æœŸé©—è­‰** |
| **5.1.2 PatientHeader/Tabs** | ğŸŸ¢ ä½ | æ¨™æº– React çµ„ä»¶ | shadcn/ui æ¨¡æ¿å¯ç”¨ | é¢¨éšªå¯æ§ |
| **5.1.3 DailyLogsTrendChart** | ğŸŸ¡ ä¸­ | Recharts å­¸ç¿’æ›²ç·šï¼Œæ•¸æ“šè½‰æ› | åƒè€ƒå®˜æ–¹ç¯„ä¾‹ï¼Œç°¡åŒ–éœ€æ±‚ | ä¸­ç­‰é¢¨éšª |
| **5.1.4 éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦** | ğŸŸ¢ ä½ | æ¨™æº–éŒ¯èª¤é‚Šç•Œæ¨¡å¼ | React Error Boundary + Testing Library | é¢¨éšªå¯æ§ |
| **5.3.1 LIFF æ¶æ§‹ + useTTS** | ğŸŸ¡ ä¸­ | **Web Speech API ç€è¦½å™¨ç›¸å®¹æ€§** | iOS/Android æ—©æœŸæ¸¬è©¦ï¼Œé™ç´šæ–¹æ¡ˆ | **éœ€æ—©æœŸé©—è­‰** |
| **5.3.2 CAT å•å· UI** | ğŸŸ¢ ä½ | éœæ…‹è¡¨å–® UI | åƒè€ƒ cat_form.htmlï¼ŒReact Hook Form | é¢¨éšªå¯æ§ |
| **5.3.3 mMRC + çµæœé ** | ğŸŸ¢ ä½ | ç°¡å–®å–®é¸ + çµæœé¡¯ç¤º | æ²¿ç”¨ CAT æ¨¡å¼ | é¢¨éšªå¯æ§ |
| **5.3.4 è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦** | ğŸŸ¡ ä¸­ | Zod é©—è­‰è¦å‰‡ï¼Œç«¯åˆ°ç«¯æ¸¬è©¦ | é€æ­¥æ¸¬è©¦ï¼Œæ‰‹å‹•é©—è­‰ | ä¸­ç­‰é¢¨éšª |
| **5.6 CAT TTS å®Œæ•´æ•´åˆ** | ğŸŸ¡ ä¸­ | **iOS Safari æ‰‹å‹¢è§¸ç™¼é™åˆ¶** | ç”¨æˆ¶é»æ“Šè§¸ç™¼ï¼Œæä¾›è¦–è¦ºåé¥‹ | ä¸­ç­‰é¢¨éšª |
| **5.4 è¶¨å‹¢åœ–è¡¨å…ƒä»¶** | ğŸŸ¡ ä¸­ | Recharts è¤‡é›œåº¦ï¼Œæ•¸æ“šè™•ç† | å¯å»¶å¾Œï¼Œé™ä½ Sprint 3 é¢¨éšª | **å¯å»¶å¾Œ** |

**é¢¨éšªç·©è§£å»ºè­°**:
1. **é«˜é¢¨éšªä»»å‹™æå‰** (5.1.1, 5.3.1): Week 5-6 å‰æœŸå®Œæˆï¼Œç•™å‡ºèª¿æ•´æ™‚é–“
2. **TTS æ—©æœŸæ¸¬è©¦**: Day 1 å°±æ‡‰åœ¨ iOS Safari (LINE ç€è¦½å™¨) ä¸Šæ¸¬è©¦ Web Speech API
3. **åœ–è¡¨åŠŸèƒ½å»¶å¾Œ**: 5.4 å¦‚é‡å•é¡Œå¯å»¶è‡³ Sprint 4ï¼Œä¸å½±éŸ¿ MVP

---

### 3ï¸âƒ£ æ¥­å‹™åƒ¹å€¼è©•ä¼° (Value Prioritization)

| ä»»å‹™ | ç”¨æˆ¶è§’è‰² | æ ¸å¿ƒåƒ¹å€¼ | MVP å¿…è¦æ€§ | åƒ¹å€¼è©•åˆ† |
|------|----------|----------|------------|----------|
| **5.1.1 API Hooks** | æ²»ç™‚å¸« | **æ•¸æ“šç²å–åŸºç¤è¨­æ–½** | âœ… P0 | â­â­â­â­â­ |
| **5.1.2 PatientHeader/Tabs** | æ²»ç™‚å¸« | **æ ¸å¿ƒå·¥ä½œæµ - 360Â° ç—…æ‚£è¦–åœ–** | âœ… P0 | â­â­â­â­â­ |
| **5.1.3 DailyLogsTrendChart** | æ²»ç™‚å¸« | è¶¨å‹¢è¦–è¦ºåŒ– (éŒ¦ä¸Šæ·»èŠ±) | âŒ P2 | â­â­ |
| **5.1.4 éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦** | æ²»ç™‚å¸« | **ç©©å®šæ€§ä¿éšœ** | âœ… P0 | â­â­â­â­â­ |
| **5.3.1 LIFF æ¶æ§‹ + useTTS** | ç—…æ‚£ | **å•å·å¡«ç­”åŸºç¤** | âœ… P0 | â­â­â­â­â­ |
| **5.3.2 CAT å•å· UI** | ç—…æ‚£ | **æ ¸å¿ƒå•å·å¡«ç­”** | âœ… P0 | â­â­â­â­â­ |
| **5.3.3 mMRC + çµæœé ** | ç—…æ‚£ | **å®Œæ•´å•å·æµç¨‹** | âœ… P0 | â­â­â­â­â­ |
| **5.3.4 è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦** | ç—…æ‚£ | **æ•¸æ“šæº–ç¢ºæ€§ä¿éšœ** | âœ… P0 | â­â­â­â­â­ |
| **5.6 CAT TTS å®Œæ•´æ•´åˆ** | ç—…æ‚£ (è€å¹´) | ç„¡éšœç¤™åŠ åˆ†é … | âš ï¸ P1 | â­â­â­ |
| **5.4 è¶¨å‹¢åœ–è¡¨å…ƒä»¶** | æ²»ç™‚å¸« | æ•¸æ“šè¦–è¦ºåŒ– (å¯é¸) | âŒ P2 | â­â­ |

**åƒ¹å€¼æ’åº**:
1. **P0 (å¿…é ˆæœ‰)**: 5.1.1, 5.1.2, 5.1.4, 5.3.1, 5.3.2, 5.3.3, 5.3.4 â†’ **MVP æ ¸å¿ƒ**
2. **P1 (æ‡‰è©²æœ‰)**: 5.6 â†’ ç„¡éšœç¤™åŠ åˆ†é …ï¼Œç¨ç«‹åŠŸèƒ½
3. **P2 (æœ€å¥½æœ‰)**: 5.4, 5.1.3 â†’ éŒ¦ä¸Šæ·»èŠ±ï¼Œå¯å»¶å¾Œ

---

### 4ï¸âƒ£ é—œéµè·¯å¾‘åˆ†æ (Critical Path Method)

```mermaid
graph TD
    Start[Sprint 3 é–‹å§‹] --> Task511[5.1.1 API Hooks<br/>16h]

    Task511 --> Task512[5.1.2 PatientHeader/Tabs<br/>8h]
    Task512 --> Task514[5.1.4 éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦<br/>8h]

    Task511 -.å¯é¸.-> Task513[5.1.3 DailyLogsTrendChart<br/>8h]
    Task513 -.-> Task54[5.4 è¶¨å‹¢åœ–è¡¨å…ƒä»¶<br/>16h]

    Start --> Task531[5.3.1 LIFF æ¶æ§‹ + useTTS<br/>8h]
    Task531 --> Task532[5.3.2 CAT å•å· UI<br/>8h]
    Task531 --> Task533[5.3.3 mMRC + çµæœé <br/>8h]

    Task532 --> Task534[5.3.4 è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦<br/>8h]
    Task533 --> Task534

    Task531 -.-> Task56[5.6 CAT TTS å®Œæ•´æ•´åˆ<br/>8h]

    Task514 --> MVP1[Dashboard 360Â° MVP]
    Task534 --> MVP2[LIFF å•å· MVP]
    Task56 --> MVP3[ç„¡éšœç¤™ MVP]

    MVP1 --> End[Sprint 3 å®Œæˆ]
    MVP2 --> End
    MVP3 -.-> End
    Task54 -.å¯é¸.-> End

    style Task511 fill:#ff6b6b
    style Task512 fill:#ff6b6b
    style Task514 fill:#ff6b6b
    style Task531 fill:#ff6b6b
    style Task532 fill:#ff6b6b
    style Task533 fill:#ff6b6b
    style Task534 fill:#ff6b6b
    style Task56 fill:#ffd93d
    style Task513 fill:#95e1d3
    style Task54 fill:#95e1d3
```

**åœ–ä¾‹**:
- ğŸ”´ ç´…è‰² (å¯¦ç·š): P0 é—œéµè·¯å¾‘ä»»å‹™
- ğŸŸ¡ é»ƒè‰² (è™›ç·š): P1 é‡è¦ä½†éé—œéµ
- ğŸŸ¢ ç¶ è‰² (è™›ç·š): P2 å¯é¸ä»»å‹™

**é—œéµè·¯å¾‘ç¸½æ™‚é•·**: 64h (5.1.1 â†’ 5.1.2 â†’ 5.1.4 â†’ 5.3.1 â†’ 5.3.2/5.3.3 â†’ 5.3.4)

**éé—œéµè·¯å¾‘**: 5.4, 5.1.3, 5.6 å¯å¹³è¡Œæˆ–å»¶å¾Œè™•ç†

---

## ğŸ¯ æ¨è–¦å¯¦ä½œè¨ˆç•« (Recommended Implementation Plan)

### ğŸ“… Week 5: Dashboard 360Â° é é¢ (32h)

#### **Day 1-2 (16h): é—œéµåŸºç¤è¨­æ–½**
```
ğŸ”´ P0: Task 5.1.1 - TanStack Query Hooks + API æ•´åˆ
â”œâ”€ å·¥æ™‚: 16h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ hooks/api/usePatient.ts
â”‚  â”œâ”€ hooks/api/useDailyLogs.ts
â”‚  â”œâ”€ hooks/api/useSurveys.ts
â”‚  â””â”€ lib/api-client.ts
â””â”€ é©—æ”¶: API æ­£å¸¸å›å‚³è³‡æ–™ï¼ŒéŒ¯èª¤è™•ç†å®Œå–„

âš ï¸ é¢¨éšª: TanStack Query 5 æ–°ç‰ˆæœ¬ï¼Œéœ€æ—©æœŸé©—è­‰
âœ… ç·©è§£: åƒè€ƒ ADR-012 æ¨¡å¼ï¼Œå…ˆæ¸¬è©¦å–®ä¸€ API
```

**ç‚ºä½•æœ€å„ªå…ˆï¼Ÿ**
- âœ… æ‰€æœ‰å¾ŒçºŒåŠŸèƒ½éƒ½ä¾è³´ API Hooks
- âœ… æ—©æœŸç™¼ç¾ API æ•´åˆå•é¡Œ
- âœ… 16h è¶³å¤ å®Œæˆä¸¦æ¸¬è©¦

---

#### **Day 2-3 (8h): æ ¸å¿ƒå±•ç¤ºçµ„ä»¶**
```
ğŸ”´ P0: Task 5.1.2 - PatientHeader + PatientTabs
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ components/patient/PatientHeader.tsx
â”‚  â”œâ”€ components/patient/PatientTabs.tsx
â”‚  â””â”€ app/patients/[id]/page.tsx (Container)
â””â”€ é©—æ”¶: ç—…æ‚£è³‡è¨Šæ­£ç¢ºé¡¯ç¤ºï¼ŒTab åˆ‡æ›æ­£å¸¸

âš ï¸ é¢¨éšª: ä½ (æ¨™æº– React çµ„ä»¶)
âœ… å»ºè­°: ä½¿ç”¨ shadcn/ui Tabs çµ„ä»¶
```

**ç‚ºä½•ç¬¬äºŒå„ªå…ˆï¼Ÿ**
- âœ… ä¾è³´ 5.1.1 å®Œæˆ
- âœ… æ²»ç™‚å¸«æ ¸å¿ƒå·¥ä½œæµ
- âœ… é¢¨éšªä½ï¼Œå¯å¿«é€Ÿå®Œæˆ

---

#### **Day 3 (8h): å¯é¸åœ–è¡¨åŠŸèƒ½**
```
ğŸŸ¢ P2: Task 5.1.3 - DailyLogsTrendChart (å¯å»¶å¾Œ)
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â””â”€ components/charts/DailyLogsTrendChart.tsx (Recharts)
â””â”€ é©—æ”¶: 7æ—¥è¶¨å‹¢åœ–æ­£ç¢ºé¡¯ç¤º

âš ï¸ é¢¨éšª: ä¸­ (Recharts å­¸ç¿’æ›²ç·š)
ğŸ’¡ å»ºè­°: å¦‚æ™‚é–“ç·Šå¼µï¼Œå»¶å¾Œè‡³ Week 6 æˆ– Sprint 4
```

**ç‚ºä½•å¯å»¶å¾Œï¼Ÿ**
- âŒ éé—œéµè·¯å¾‘
- âŒ éŒ¦ä¸Šæ·»èŠ±åŠŸèƒ½
- âœ… å¯ç”¨éœæ…‹æ•¸æ“šè¡¨æ ¼æ›¿ä»£

---

#### **Day 4 (8h): ç©©å®šæ€§ä¿éšœ**
```
ğŸ”´ P0: Task 5.1.4 - éŒ¯èª¤è™•ç† + Loading ç‹€æ…‹ + æ¸¬è©¦
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ components/ui/ErrorBoundary.tsx
â”‚  â”œâ”€ components/ui/LoadingSpinner.tsx
â”‚  â”œâ”€ components/ui/ErrorAlert.tsx
â”‚  â””â”€ tests/patient-detail-page.test.tsx
â””â”€ é©—æ”¶: æ‰€æœ‰éŒ¯èª¤æƒ…å¢ƒéƒ½æœ‰å„ªé›…è™•ç†

âš ï¸ é¢¨éšª: ä½ (æ¨™æº–æ¨¡å¼)
âœ… å¿…é ˆ: Dashboard ä¸Šç·šå‰å¿…é ˆç©©å®š
```

**ç‚ºä½•å¿…é ˆå®Œæˆï¼Ÿ**
- âœ… MVP å¿…é ˆç©©å®šï¼Œä¸å¯å´©æ½°
- âœ… æ²»ç™‚å¸«ä¾è³´æ­¤é é¢å·¥ä½œ
- âœ… éŒ¯èª¤è™•ç†æ˜¯å“è³ªåº•ç·š

---

### ğŸ“… Week 6: LIFF å•å· + TTS ç„¡éšœç¤™ (40h)

#### **Day 1 (8h): LIFF åŸºç¤æ¶æ§‹**
```
ğŸ”´ P0: Task 5.3.1 - LIFF æ¶æ§‹ + useTTS Hook
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ hooks/useTTS.ts (Web Speech API)
â”‚  â”œâ”€ pages/survey/[patientId].tsx
â”‚  â””â”€ lib/liff-init.ts
â””â”€ é©—æ”¶: LIFF åˆå§‹åŒ–æˆåŠŸï¼ŒTTS åœ¨ iOS Safari æ¸¬è©¦é€šé

âš ï¸ é¢¨éšª: ä¸­ (Web Speech API ç›¸å®¹æ€§)
âœ… ç·©è§£: Day 1 ç«‹å³åœ¨ LINE ç€è¦½å™¨æ¸¬è©¦ TTS
```

**ç‚ºä½• Day 1 å°±åš TTSï¼Ÿ**
- âœ… **æ—©æœŸé©—è­‰é«˜é¢¨éšªåŠŸèƒ½** (iOS Safari TTS ç›¸å®¹æ€§)
- âœ… å¾ŒçºŒ 5.3.2, 5.3.3 éƒ½ä¾è³´ useTTS Hook
- âœ… å¦‚æœ TTS æœ‰å•é¡Œï¼Œæœ‰ 4 å¤©èª¿æ•´æ™‚é–“

---

#### **Day 2 (8h): æ ¸å¿ƒå•å· UI**
```
ğŸ”´ P0: Task 5.3.2 - CAT 8 é¡Œå•å· UI
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ components/survey/QuestionCard.tsx
â”‚  â”œâ”€ components/survey/CATSurvey.tsx
â”‚  â””â”€ data/cat-questions.ts
â””â”€ é©—æ”¶: CAT 8 é¡Œæ­£ç¢ºé¡¯ç¤ºï¼Œé¸é …å¯é»é¸ï¼ŒTTS æœ—è®€æ­£å¸¸

âš ï¸ é¢¨éšª: ä½ (éœæ…‹ UI)
âœ… åƒè€ƒ: docs/frontend/cat_form.html
```

---

#### **Day 3 (8h): å®Œæ•´å•å·æµç¨‹**
```
ğŸ”´ P0: Task 5.3.3 - mMRC å•å· + SurveyResult çµæœé 
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ components/survey/mMRCSurvey.tsx
â”‚  â”œâ”€ components/survey/SurveyResult.tsx
â”‚  â””â”€ utils/survey-calculator.ts (è¨ˆåˆ†é‚è¼¯)
â””â”€ é©—æ”¶: mMRC æ­£ç¢ºé¡¯ç¤ºï¼Œçµæœé åˆ†æ•¸æ­£ç¢º

âš ï¸ é¢¨éšª: ä½ (æ²¿ç”¨ CAT æ¨¡å¼)
âœ… è¨ˆåˆ†é‚è¼¯: CAT (0-40), mMRC (0-4)
```

---

#### **Day 4 (8h): è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦**
```
ğŸ”´ P0: Task 5.3.4 - è¡¨å–®é©—è­‰ + æäº¤é‚è¼¯ + TTS æ•´åˆæ¸¬è©¦
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ schemas/survey-schema.ts (Zod)
â”‚  â”œâ”€ api/submit-survey.ts
â”‚  â””â”€ tests/survey-flow.test.tsx
â””â”€ é©—æ”¶:
   â”œâ”€ æœªå¡«å®Œä¸å¯æäº¤
   â”œâ”€ æäº¤æˆåŠŸå›å‚³æ­£ç¢º
   â””â”€ TTS åœ¨ iOS/Android éƒ½æ­£å¸¸

âš ï¸ é¢¨éšª: ä¸­ (ç«¯åˆ°ç«¯æ¸¬è©¦)
âœ… æ¸¬è©¦: æ‰‹å‹•æ¸¬è©¦ + React Testing Library
```

---

#### **Day 5 (8h): ç„¡éšœç¤™å®Œæ•´æ•´åˆ**
```
ğŸŸ¡ P1: Task 5.6 - CAT TTS å®Œæ•´æ•´åˆ + ç„¡éšœç¤™æ¸¬è©¦
â”œâ”€ å·¥æ™‚: 8h
â”œâ”€ ç”¢å‡º:
â”‚  â”œâ”€ å®Œæ•´ ARIA æ¨™ç±¤
â”‚  â”œâ”€ é«˜å°æ¯”æ¨¡å¼åˆ‡æ›
â”‚  â”œâ”€ å­—é«”å¤§å°èª¿æ•´
â”‚  â””â”€ å®Œæ•´ iOS/Android TTS æ¸¬è©¦å ±å‘Š
â””â”€ é©—æ”¶: WCAG 2.1 AA æ¨™æº–åˆè¦

âš ï¸ é¢¨éšª: ä¸­ (è·¨è¨­å‚™æ¸¬è©¦)
ğŸ’¡ å»ºè­°: å¦‚ Week 6 å‰ 4 å¤©æœ‰å»¶é²ï¼Œæ­¤ä»»å‹™å¯ä½µå…¥ 5.3.2-5.3.4
```

**ç‚ºä½• Day 5ï¼Ÿ**
- âœ… P1 é‡è¦ä½†éé—œéµè·¯å¾‘
- âœ… ç¨ç«‹åŠŸèƒ½ï¼Œä¸é˜»å¡å…¶ä»–ä»»å‹™
- âœ… å¦‚æ™‚é–“ä¸è¶³ï¼ŒåŸºç¤ TTS (Day 1) å·²å¯ç”¨

---

#### **å¯é¸ä»»å‹™ (æ™‚é–“å…è¨±)**
```
ğŸŸ¢ P2: Task 5.4 - è¶¨å‹¢åœ–è¡¨å…ƒä»¶ (16h)
â”œâ”€ æ™‚æ©Ÿ: Week 6 æœ«æˆ– Sprint 4
â”œâ”€ ç†ç”±: é MVP å¿…é ˆï¼Œå¯å»¶å¾Œ
â””â”€ å»ºè­°: è‹¥ Week 5-6 é€²åº¦é †åˆ©ï¼Œå¯æ–¼ Week 6 æœ«é–‹å§‹
```

---

## ğŸ“Š å¯¦ä½œé †åºç¸½çµ

### âœ… å¿…é ˆå®Œæˆ (P0) - 64h

| é †åº | ä»»å‹™ | å·¥æ™‚ | Week | é—œéµåŸå›  |
|------|------|------|------|----------|
| 1ï¸âƒ£ | 5.1.1 API Hooks | 16h | Week 5 Day 1-2 | **é—œéµä¾è³´** - æ‰€æœ‰åŠŸèƒ½çš„åŸºç¤ |
| 2ï¸âƒ£ | 5.1.2 PatientHeader/Tabs | 8h | Week 5 Day 2-3 | **æ ¸å¿ƒåƒ¹å€¼** - æ²»ç™‚å¸« 360Â° è¦–åœ– |
| 3ï¸âƒ£ | 5.1.4 éŒ¯èª¤è™•ç†èˆ‡æ¸¬è©¦ | 8h | Week 5 Day 4 | **ç©©å®šæ€§** - MVP å¿…é ˆå¯é  |
| 4ï¸âƒ£ | 5.3.1 LIFF + useTTS | 8h | Week 6 Day 1 | **æ—©æœŸé©—è­‰** - TTS é«˜é¢¨éšªåŠŸèƒ½ |
| 5ï¸âƒ£ | 5.3.2 CAT å•å· UI | 8h | Week 6 Day 2 | **æ ¸å¿ƒåƒ¹å€¼** - ç—…æ‚£å¡«ç­”æ ¸å¿ƒ |
| 6ï¸âƒ£ | 5.3.3 mMRC + çµæœé  | 8h | Week 6 Day 3 | **å®Œæ•´æµç¨‹** - å•å·å®Œæ•´æ€§ |
| 7ï¸âƒ£ | 5.3.4 è¡¨å–®é©—è­‰èˆ‡æ¸¬è©¦ | 8h | Week 6 Day 4 | **æ•¸æ“šæº–ç¢º** - æäº¤é‚è¼¯é©—è­‰ |

**ç¸½è¨ˆ**: 64h / 96h (66.7% ç‚º P0 æ ¸å¿ƒä»»å‹™)

---

### ğŸŸ¡ æ‡‰è©²å®Œæˆ (P1) - 8h

| é †åº | ä»»å‹™ | å·¥æ™‚ | Week | ç†ç”± |
|------|------|------|------|------|
| 8ï¸âƒ£ | 5.6 CAT TTS å®Œæ•´æ•´åˆ | 8h | Week 6 Day 5 | ç„¡éšœç¤™åŠ åˆ†é …ï¼Œç¨ç«‹åŠŸèƒ½ |

---

### ğŸŸ¢ å¯é¸å®Œæˆ (P2) - 24h

| ä»»å‹™ | å·¥æ™‚ | å»ºè­°æ™‚æ©Ÿ | ç†ç”± |
|------|------|----------|------|
| 5.1.3 DailyLogsTrendChart | 8h | Week 5 Day 3 æˆ–å»¶å¾Œ | å¯ç”¨éœæ…‹è¡¨æ ¼æ›¿ä»£ |
| 5.4 è¶¨å‹¢åœ–è¡¨å…ƒä»¶ | 16h | Sprint 4 | éŒ¦ä¸Šæ·»èŠ±ï¼Œé MVP å¿…é ˆ |

---

## ğŸš¨ é¢¨éšªç®¡ç†èˆ‡æ‡‰è®Šè¨ˆç•«

### é«˜é¢¨éšªé»èˆ‡æ‡‰å°

| é¢¨éšª | ç™¼ç”Ÿæ™‚æ©Ÿ | å½±éŸ¿ | æ‡‰å°ç­–ç•¥ |
|------|----------|------|----------|
| **TanStack Query æ•´åˆå¤±æ•—** | Week 5 Day 1-2 | ğŸ”´ é˜»å¡æ‰€æœ‰åŠŸèƒ½ | **æå‰æº–å‚™**: åƒè€ƒ ADR-012ï¼Œæº–å‚™ fallback æ–¹æ¡ˆ (SWR) |
| **Web Speech API iOS ä¸ç›¸å®¹** | Week 6 Day 1 | ğŸŸ¡ TTS åŠŸèƒ½å—é™ | **é™ç´šæ–¹æ¡ˆ**: æä¾›æ–‡å­—ç‰ˆæœ¬ï¼Œç­‰ Sprint 4 å¾Œç«¯ TTS |
| **Recharts å­¸ç¿’æ›²ç·šéé™¡** | Week 5 Day 3 | ğŸŸ¢ å»¶é²åœ–è¡¨åŠŸèƒ½ | **æ‡‰å°**: ä½¿ç”¨éœæ…‹æ•¸æ“šè¡¨æ ¼ï¼Œå»¶å¾Œè‡³ Sprint 4 |
| **Week 5 é€²åº¦è½å¾Œ** | Week 5 æœ« | ğŸŸ¡ å½±éŸ¿ Week 6 | **æ‡‰å°**: è·³é 5.1.3ï¼Œç¢ºä¿ 5.1.1, 5.1.2, 5.1.4 å®Œæˆ |
| **Week 6 é€²åº¦è½å¾Œ** | Week 6 Day 3 | ğŸŸ¡ å½±éŸ¿ TTS æ•´åˆ | **æ‡‰å°**: 5.6 ç°¡åŒ–ç‚ºåŸºç¤ TTS (å·²åœ¨ 5.3.1 å®Œæˆ) |

---

### é—œéµæ±ºç­–é»

| æ™‚æ©Ÿ | æ±ºç­–å•é¡Œ | é¸é … A | é¸é … B |
|------|----------|--------|--------|
| **Week 5 Day 2** | 5.1.1 æ˜¯å¦å®Œæˆï¼Ÿ | âœ… ç¹¼çºŒ 5.1.2 | âŒ å»¶é•· 5.1.1 è‡³ Day 3 |
| **Week 5 Day 3** | æ˜¯å¦åš 5.1.3 åœ–è¡¨ï¼Ÿ | âœ… å¦‚é€²åº¦é †åˆ© | âŒ è·³éï¼Œç›´æ¥ 5.1.4 |
| **Week 6 Day 1** | TTS iOS æ¸¬è©¦çµæœï¼Ÿ | âœ… é€šéï¼Œç¹¼çºŒ | âŒ å¤±æ•—ï¼Œå•Ÿç”¨é™ç´šæ–¹æ¡ˆ |
| **Week 6 Day 4** | æ˜¯å¦åš 5.6 å®Œæ•´ TTSï¼Ÿ | âœ… å¦‚é€²åº¦é †åˆ© | âŒ åŸºç¤ TTS å·²è¶³å¤  |

---

## âœ… é©—æ”¶æ¨™æº– (Acceptance Criteria)

### Sprint 3 å¿…é ˆé”æˆ (MUST)

- âœ… **Dashboard 360Â°**: æ²»ç™‚å¸«å¯æŸ¥çœ‹å–®ä¸€ç—…æ‚£çš„ Patient + DailyLog + Survey
- âœ… **LIFF å•å·**: ç—…æ‚£å¯åœ¨ LINE ä¸­å®Œæˆ CAT (8 é¡Œ) + mMRC (1 é¡Œ)
- âœ… **åˆ†æ•¸è¨ˆç®—**: CAT (0-40), mMRC (0-4) æ­£ç¢ºè¨ˆç®—ä¸¦é¡¯ç¤º
- âœ… **éŒ¯èª¤è™•ç†**: ç¶²è·¯å¤±æ•—ã€API éŒ¯èª¤éƒ½æœ‰å„ªé›…é™ç´š
- âœ… **åŸºç¤ TTS**: CAT/mMRC å•é¡Œå¯æœ—è®€ (Web Speech API)
- âœ… **æ‰‹å‹•æ¸¬è©¦**: æ²»ç™‚å¸« + ç—…æ‚£è§’è‰²æµç¨‹æ¸¬è©¦é€šé

---

### Sprint 3 æœ€å¥½é”æˆ (SHOULD)

- ğŸŸ¡ **å®Œæ•´ TTS**: ARIA æ¨™ç±¤ã€é«˜å°æ¯”æ¨¡å¼ã€å­—é«”èª¿æ•´
- ğŸŸ¡ **è¶¨å‹¢åœ–è¡¨**: 7æ—¥ DailyLog è¶¨å‹¢è¦–è¦ºåŒ–

---

### Sprint 3 å¯å»¶å¾Œ (COULD)

- ğŸŸ¢ **è¶¨å‹¢åœ–è¡¨å…ƒä»¶**: é€šç”¨åœ–è¡¨å…ƒä»¶ (å¯ç”¨æ–¼ DailyLog + Survey è¶¨å‹¢)

---

## ğŸ¯ æœ€çµ‚å»ºè­° (Final Recommendation)

### ç«‹å³é–‹å§‹

```bash
# Week 5 Day 1 (ä»Šå¤©é–‹å§‹)
ğŸ”´ Task 5.1.1 - TanStack Query Hooks (16h)

æº–å‚™å·¥ä½œ:
1. é–±è®€ ADR-012 å‰ç«¯æ¶æ§‹è¨­è¨ˆ
2. å®‰è£ Dashboard å°ˆæ¡ˆä¾è³´:
   cd frontend/dashboard
   npm install @tanstack/react-query axios
3. å»ºç«‹ API Client åŸºç¤æª”æ¡ˆ
4. å¯¦ä½œ usePatient Hook (æœ€ç°¡å–®çš„ï¼Œå…ˆé©—è­‰æ¨¡å¼)
```

### Linus å¼ç¸½çµ

> **"Talk is cheap. Show me the code."** - åˆ†æå®Œäº†ï¼Œé–‹å§‹å¯«ã€‚

**æˆ‘å€‘åšå°äº†ä»€éº¼**:
1. âœ… **è­˜åˆ¥é—œéµè·¯å¾‘** - 5.1.1 API Hooks æ˜¯æ•´å€‹ Sprint çš„è„Šæ¢
2. âœ… **æ—©æœŸé©—è­‰é¢¨éšª** - TTS åœ¨ Day 1 å°±æ¸¬è©¦ï¼Œä¸æ˜¯ Day 5 æ‰ç™¼ç¾å•é¡Œ
3. âœ… **èšç„¦ MVP** - P2 ä»»å‹™æ˜ç¢ºæ¨™è¨˜ï¼Œå¯å»¶å¾Œä¸å¿ƒç–¼

**æ¥ä¸‹ä¾†å°±æ˜¯åŸ·è¡Œ**:
- Week 5: æŠŠ Dashboard 360Â° åšåˆ°èƒ½ç”¨
- Week 6: æŠŠ LIFF å•å·åšåˆ°ç—…æ‚£èƒ½å¡«
- å…¶ä»–éƒ½æ˜¯éŒ¦ä¸Šæ·»èŠ±

**The rest is just typing.** ğŸš€

---

**è®Šæ›´è¨˜éŒ„**:
- [2025-10-23] å‰µå»º Sprint 3 ä»»å‹™å„ªå…ˆç´šåˆ†æ v1.0
- [2025-10-23] å®Œæˆ 4 ç¶­åº¦åˆ†æ + é—œéµè·¯å¾‘åœ– + å¯¦ä½œé †åºå»ºè­°

**ç›¸é—œæ–‡ä»¶**:
- [SPRINT3_DEVELOPMENT_PLAN.md](./SPRINT3_DEVELOPMENT_PLAN.md) - è©³ç´°é–‹ç™¼è¨ˆç•«
- [ADR-010](../adr/ADR-010-sprint3-mvp-scope-reduction.md) - MVP ç¯„åœç¸®æ¸›æ±ºç­–
- [ADR-011](../adr/ADR-011-cat-accessibility-tts-solution.md) - TTS æŠ€è¡“æ–¹æ¡ˆ
- [ADR-012](../adr/ADR-012-frontend-architecture-sprint3.md) - å‰ç«¯æ¶æ§‹è¨­è¨ˆ

---

**ç¶­è­·è€…**: RespiraAlly Development Team
**å¯©æ ¸è€…**: Technical Lead, Product Manager
