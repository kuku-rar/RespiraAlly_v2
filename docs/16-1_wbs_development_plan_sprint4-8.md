# RespiraAlly V2.0 - Sprint 4-8 è©³ç´°å·¥ä½œåˆ†è§£ (WBS Detail)

---

**æ–‡ä»¶ç‰ˆæœ¬ (Document Version):** `v1.1` - Sprint 4-8 è©³ç´°è¦åŠƒ + Sprint 4 é€²åº¦è¿½è¹¤
**æœ€å¾Œæ›´æ–° (Last Updated):** `2025-10-24 13:05`
**ä¸»è¦ä½œè€… (Lead Author):** `TaskMaster Hub / Claude Code AI`
**å¯©æ ¸è€… (Reviewers):** `Technical Lead, Product Manager, Architecture Team`
**ç‹€æ…‹ (Status):** `é€²è¡Œä¸­ - Sprint 4 å¯¦ä½œä¸­ (8.5h/104h å®Œæˆ)`
**çˆ¶æ–‡ä»¶ (Parent Document):** `16_wbs_development_plan.md`

---

## ğŸ“‹ æ–‡ä»¶ç›®çš„

æœ¬æ–‡ä»¶æä¾› Sprint 4-8 çš„è©³ç´°ä»»å‹™åˆ†è§£ï¼Œè£œå……ä¸» WBS æ–‡ä»¶ï¼ˆ16_wbs_development_plan.mdï¼‰ä¸­ç¬¬ 730-739 è¡Œçœç•¥çš„å…§å®¹ã€‚

**æ¶µè“‹ç¯„åœ**:
- **Sprint 4**: é¢¨éšªå¼•æ“ & é è­¦ç³»çµ± [104h]
- **Sprint 5**: RAG ç³»çµ±åŸºç¤ [80h]
- **Sprint 6**: AI èªéŸ³è™•ç†éˆ + ç‡Ÿé¤Šè©•ä¼° [144h]
- **Sprint 7**: é€šçŸ¥ç³»çµ± & æ’ç¨‹ [72h]
- **Sprint 8**: å„ªåŒ– & ä¸Šç·šæº–å‚™ [96h]
- **Sprint 11**: æ¸¬è©¦èˆ‡å“è³ªä¿è­‰ [80h] (æŒçºŒæ€§ä»»å‹™)

**ç¸½å·¥æ™‚**: 576h (Sprint 4-8) + 80h (æ¸¬è©¦å“ä¿) = **656h**

---

## ç›®éŒ„ (Table of Contents)

1. [Sprint 4: é¢¨éšªå¼•æ“ & é è­¦ç³»çµ±](#sprint-4-é¢¨éšªå¼•æ“--é è­¦ç³»çµ±-104h)
2. [Sprint 5: RAG ç³»çµ±åŸºç¤](#sprint-5-rag-ç³»çµ±åŸºç¤-80h)
3. [Sprint 6: AI èªéŸ³è™•ç†éˆ + ç‡Ÿé¤Šè©•ä¼°](#sprint-6-ai-èªéŸ³è™•ç†éˆ--ç‡Ÿé¤Šè©•ä¼°-144h)
4. [Sprint 7: é€šçŸ¥ç³»çµ± & æ’ç¨‹](#sprint-7-é€šçŸ¥ç³»çµ±--æ’ç¨‹-72h)
5. [Sprint 8: å„ªåŒ– & ä¸Šç·šæº–å‚™](#sprint-8-å„ªåŒ–--ä¸Šç·šæº–å‚™-96h)
6. [Sprint 11: æ¸¬è©¦èˆ‡å“è³ªä¿è­‰](#sprint-11-æ¸¬è©¦èˆ‡å“è³ªä¿è­‰-80h)
7. [è·¨ Sprint ä¾è³´é—œä¿‚åœ–](#è·¨-sprint-ä¾è³´é—œä¿‚åœ–)
8. [æŠ€è¡“æ£§ç¸½è¦½](#æŠ€è¡“æ£§ç¸½è¦½)

---

## Sprint 4: é¢¨éšªå¼•æ“ & é è­¦ç³»çµ± [104h]

### ğŸ“Š å¯¦éš›é€²åº¦è¿½è¹¤ (Progress Tracking)

**æ•´é«”é€²åº¦**: 13.5h / 104h (13.0% å®Œæˆ)
**æœ€å¾Œæ›´æ–°**: 2025-10-24 21:25
**ç•¶å‰ç‹€æ…‹**: ğŸŸ¢ Phase 1 å®Œæˆ + Critical Bugs å·²ä¿®å¾© â†’ Ready for Phase 2

**é‡è¦æ±ºç­–è®Šæ›´**:
- âš ï¸ **ADR-013 ä¿®è¨‚**: æ¡ç”¨ GOLD 2011 ABE Classification å–ä»£åŸè¨ˆåŠƒçš„è‡ªè¨‚é¢¨éšªè©•åˆ†å…¬å¼
- âœ… **ADR-014**: å¯¦æ–½ Hybrid å‘å¾Œå…¼å®¹ç­–ç•¥ (GOLD ABE + Legacy risk fields)
- âœ… **ADR-015**: RBAC Extension for MVP Flexibility - SUPERVISOR/ADMIN è§’è‰²æ“´å±•

**å·²å®Œæˆä»»å‹™** (2025-10-24):
- âœ… **Frontend Hybrid Strategy** [3.5h]
  - TypeScript interfaces æ“´å±• (PatientKPI + GOLD ABE fields)
  - Mock data æ›´æ–° (3 patients with correct GOLD classification)
  - UI component ä¿®æ”¹ (HealthKPIDashboard Hybrid display)
- âœ… **Backend GOLD ABE Engine** [5h]
  - ORM models å‰µå»º (ExacerbationModel, RiskAssessmentModel, AlertModel, PatientProfile updates)
  - GOLD ABE Classification Engine å¯¦ä½œ (3-tier: A/B/E)
  - KPI Service æ•¸æ“šèšåˆ (5 data sources integration)
  - KPI API endpoint (/patients/{id}/kpis with authorization)
- âœ… **RBAC Extension - MVP Flexibility** [4.0h] â­ NEW
  - Phase 1: Foundation (1.5h) - UserRole enum æ“´å±•ã€authorization.py ä¸­å¤®åŒ–æˆæ¬Šæ¨¡çµ„ã€Database migration
  - Phase 2: API Refactoring (2.0h) - 20 endpoints é‡æ§‹ï¼ˆpatient/exacerbation/daily_log/survey 4å€‹ routerï¼‰
  - Phase 3: Documentation (0.5h) - seed_supervisor.py è…³æœ¬ã€ADR-015 å®Œæ•´è¨­è¨ˆæ–‡æª” (1200+ lines)
  - Code Quality: 73% æ¸›å°‘é‡è¤‡ä»£ç¢¼ï¼ˆ15è¡Œâ†’4è¡Œ per endpointï¼‰ï¼Œå–®ä¸€äº‹å¯¦ä¾†æºï¼ŒLinus "Good Taste" åŸå‰‡
- âœ… **Critical Bug Fixes** [1.0h] â­ NEW
  - **Auth Token Revocation Bug** (P0): Redis port é…ç½®éŒ¯èª¤ä¿®å¾© (16379 â†’ 6379)
    - Root cause: Redis connection failure â†’ aggressive fail-safe â†’ all tokens revoked
    - Impact: èªè­‰æµç¨‹å®Œå…¨æ¢å¾©ï¼ŒAPI æ¸¬è©¦è§£é™¤é˜»å¡
  - **Patient Repository Sort Error** (P0): æ¬„ä½å¼•ç”¨éŒ¯èª¤ä¿®å¾© (created_at â†’ user_id)
    - Root cause: PatientProfileModel ç¼ºå°‘ created_at æ¬„ä½
    - Solution: ä½¿ç”¨ user_id (UUID with timestamp component) æ’åº
  - **Test Data Generation Script** (P1): 3å€‹éŒ¯èª¤ä¿®å¾© (DATABASE_URL, field name mismatch, schema strategy)
    - Generated: 5 therapists + 50 patients + 14,592 daily logs
    - Time range: éå»ä¸€å¹´ (2024-10-25 ~ 2025-10-24)

**ä¸‹ä¸€æ­¥ä»»å‹™** (å¾…åŸ·è¡Œ):
- â³ Migration 005 åŸ·è¡Œ (æ–°å¢ 4 å€‹è¡¨ï¼šexacerbations, risk_assessments, alerts, patient_profiles updates)
- â³ Exacerbation Management API [12h] (CRUD endpoints)
- â³ Unit Tests for GOLD Classification Engine [P2 - non-blocking]
- â³ RBAC System Testing with SUPERVISOR user

**æŠ€è¡“å‚µå‹™**: ç„¡

---

**Sprint ç›®æ¨™**: å»ºç«‹ COPD é¢¨éšªè©•åˆ†å¼•æ“ã€ç•°å¸¸è¦å‰‡å¼•æ“ã€ä»»å‹™ç®¡ç†ç³»çµ±ï¼Œå¯¦ç¾æ™ºèƒ½é è­¦èˆ‡æ²»ç™‚å¸«å·¥ä½œæµè‡ªå‹•åŒ–ã€‚

**æ™‚ç¨‹**: Week 7-8 (2 weeks)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… é¢¨éšªåˆ†æ•¸è‡ªå‹•è¨ˆç®— (åŸºæ–¼ CAT/mMRC/DailyLog)
- âœ… ç•°å¸¸è¦å‰‡å¼•æ“ (10+ è‡¨åºŠè¦å‰‡)
- âœ… ä»»å‹™ç®¡ç† API (è‡ªå‹•ä»»å‹™ç”Ÿæˆ)
- âœ… Dashboard é è­¦ä¸­å¿ƒ (é¢¨éšªæ¸…å–® + ä»»å‹™çœ‹æ¿)

**æŠ€è¡“æ±ºç­–åƒè€ƒ**:
- [ADR-012] é¢¨éšªè©•åˆ†æ¼”ç®—æ³•è¨­è¨ˆ (å¾…å‰µå»º)
- [ADR-013] ç•°å¸¸è¦å‰‡å¼•æ“æŠ€è¡“é¸å‹ (å¾…å‰µå»º)

---

### 6.1 é¢¨éšªåˆ†æ•¸è¨ˆç®—å¼•æ“ [32h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹ COPD é¢¨éšªè©•åˆ†ç³»çµ±ï¼Œæ•´åˆ CAT å•å·ã€mMRC åˆ†ç´šã€æ¯æ—¥æ—¥èªŒæ•¸æ“šï¼Œè‡ªå‹•è¨ˆç®—ç—…æ‚£é¢¨éšªç­‰ç´šä¸¦è§¸ç™¼ç›¸æ‡‰å‹•ä½œã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **é¢¨éšªè©•åˆ†å…¬å¼** (å¯èª¿æ•´æ¬Šé‡):
  ```
  RiskScore = (CAT_score * 0.4) + (mMRC_grade * 0.3) + (DailyLog_factors * 0.3)

  å…¶ä¸­ï¼š
  - CAT_score: 0-40 (æ­¸ä¸€åŒ–ç‚º 0-100)
  - mMRC_grade: 0-4 (æ­¸ä¸€åŒ–ç‚º 0-100)
  - DailyLog_factors: ç¶œåˆè€ƒé‡ SpO2ã€å‘¼å¸å›°é›£ã€ç—°é‡ã€é‹å‹•ã€å¸è¸
  ```
- **é¢¨éšªç­‰ç´šåˆ†ç•Œ**:
  - LOW (ä½é¢¨éšª): 0-30
  - MEDIUM (ä¸­é¢¨éšª): 31-60
  - HIGH (é«˜é¢¨éšª): 61-100

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| **6.1.1 Domain Model è¨­è¨ˆ** | | | **8h** | â¬œ | | | |
| 6.1.1.1 | RiskScore Entity è¨­è¨ˆ | Backend | 2 | â¬œ | 5.2 | DDD Aggregate Root, åŒ…å«è¨ˆç®—æ­·å²èˆ‡è¶¨å‹¢ | ADR-012 |
| 6.1.1.2 | RiskFactor Value Object è¨­è¨ˆ | Backend | 2 | â¬œ | 6.1.1.1 | åŒ…è£å„é …é¢¨éšªå› å­ï¼ˆCAT/mMRC/DailyLogï¼‰ | ADR-012 |
| 6.1.1.3 | RiskLevel Enum è¨­è¨ˆ | Backend | 1 | â¬œ | 6.1.1.1 | LOW/MEDIUM/HIGH æšèˆ‰èˆ‡ç­‰ç´šåˆ¤å®šé‚è¼¯ | - |
| 6.1.1.4 | RiskCalculationPolicy ä»‹é¢ | Backend | 3 | â¬œ | 6.1.1.2 | ç­–ç•¥æ¨¡å¼ï¼Œæ”¯æ´æœªä¾†æ›¿æ›æ¼”ç®—æ³• | - |
| **6.1.2 Service å±¤å¯¦ä½œ** | | | **12h** | â¬œ | | | |
| 6.1.2.1 | RiskCalculationService æ ¸å¿ƒæ¼”ç®—æ³• | Backend | 6 | â¬œ | 6.1.1 | å¯¦ä½œåŠ æ¬Šè¨ˆç®—é‚è¼¯ + DailyLog ç¶œåˆè©•åˆ† | ADR-012 |
| 6.1.2.2 | RiskScoreRepository ä»‹é¢èˆ‡å¯¦ä½œ | Backend | 4 | â¬œ | 6.1.2.1 | åŒ…å«è¶¨å‹¢æŸ¥è©¢æ–¹æ³• (get_score_trend) | - |
| 6.1.2.3 | å–®å…ƒæ¸¬è©¦ (è¨ˆç®—é‚è¼¯é©—è­‰) | Backend | 2 | â¬œ | 6.1.2.1 | æ¸¬è©¦å„ç¨® edge cases (ç¼ºå¤±æ•¸æ“šã€æ¥µç«¯å€¼) | - |
| **6.1.3 API å±¤** | | | **8h** | â¬œ | | | |
| 6.1.3.1 | `POST /risk-scores/calculate` - æ‰‹å‹•è§¸ç™¼è¨ˆç®— | Backend | 2 | â¬œ | 6.1.2 | æ”¯æ´æ‰¹æ¬¡è¨ˆç®—ï¼ˆå¤šä½ç—…æ‚£ï¼‰ | - |
| 6.1.3.2 | `GET /risk-scores/patient/{id}/latest` - æœ€æ–°é¢¨éšªåˆ†æ•¸ | Backend | 2 | â¬œ | 6.1.2 | åŒ…å«å„é …å› å­æ˜ç´°èˆ‡è¶¨å‹¢æ¨™è¨˜ | - |
| 6.1.3.3 | `GET /risk-scores/patient/{id}/history` - æ­·å²è¶¨å‹¢ | Backend | 2 | â¬œ | 6.1.2 | æ”¯æ´æ—¥æœŸç¯„åœæŸ¥è©¢èˆ‡åœ–è¡¨æ•¸æ“šæ ¼å¼ | - |
| 6.1.3.4 | Integration Tests (API + DB) | Backend | 2 | â¬œ | 6.1.3.1-6.1.3.3 | æ¶µè“‹è‡ªå‹•è§¸ç™¼èˆ‡æ‰‹å‹•è§¸ç™¼å ´æ™¯ | - |
| **6.1.4 è‡ªå‹•è§¸ç™¼æ©Ÿåˆ¶** | | | **4h** | â¬œ | | | |
| 6.1.4.1 | Domain Event: SurveyCompletedEvent â†’ Calculate | Backend | 2 | â¬œ | 6.1.2, 5.2.4 | å•å·æäº¤å¾Œè‡ªå‹•é‡ç®—é¢¨éšª | - |
| 6.1.4.2 | Domain Event: DailyLogCreatedEvent â†’ Recalculate | Backend | 2 | â¬œ | 6.1.2, 4.2.7 | æ—¥èªŒæäº¤å¾Œè‡ªå‹•é‡ç®—é¢¨éšª | - |

**Definition of Done (DoD)**:
- [ ] é¢¨éšªåˆ†æ•¸è¨ˆç®—å…¬å¼ç¶“è‡¨åºŠå°ˆå®¶é©—è­‰
- [ ] æ‰€æœ‰ 3 å€‹ API endpoints æœ‰ 80%+ æ¸¬è©¦è¦†è“‹ç‡
- [ ] è‡ªå‹•è§¸ç™¼æµç¨‹æ¸¬è©¦é€šéï¼ˆSurvey + DailyLogï¼‰
- [ ] æ€§èƒ½æ¸¬è©¦ï¼š100 ä½ç—…æ‚£åŒæ™‚è¨ˆç®— < 5s
- [ ] é¢¨éšªç­‰ç´šé‚Šç•Œå€¼æº–ç¢ºï¼ˆLOW/MEDIUM/HIGHï¼‰
- [ ] è¨ˆç®—çµæœåŒ…å«å¯è§£é‡‹æ€§æ•¸æ“šï¼ˆå„å› å­è²¢ç»åº¦ï¼‰

**æŠ€è¡“å‚µå‹™é é˜²**:
- âš ï¸ é¢¨éšªè©•åˆ†å…¬å¼æœªä¾†å¯èƒ½éœ€èª¿æ•´ â†’ ä½¿ç”¨ç­–ç•¥æ¨¡å¼ (RiskCalculationPolicy)
- âš ï¸ å¯èƒ½éœ€æ•´åˆç‡Ÿé¤Šé¢¨éšª â†’ é ç•™æ“´å±•é» (NutritionRiskFactor)

---

### 6.2 ç•°å¸¸è¦å‰‡å¼•æ“ [28h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹åŸºæ–¼è¦å‰‡çš„ç•°å¸¸åµæ¸¬ç³»çµ±ï¼Œè­˜åˆ¥éœ€è¦ç«‹å³é—œæ³¨çš„è‡¨åºŠç‹€æ³ï¼Œè‡ªå‹•è§¸ç™¼é è­¦èˆ‡ä»»å‹™ç”Ÿæˆã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **è¦å‰‡å¼•æ“æŠ€è¡“é¸å‹**:
  - âœ… **è‡ªå»ºè¼•é‡ DSL** (æ¨è–¦) - åŸºæ–¼ Python è¡¨é”å¼ï¼Œæ˜“æ–¼æ“´å±•
  - âŒ `python-rule-engine` - éæ–¼è¤‡é›œï¼Œå­¸ç¿’æˆæœ¬é«˜
- **è¦å‰‡å„²å­˜**: PostgreSQL JSONB (æ”¯æ´ç†±æ›´æ–°ï¼Œç„¡éœ€é‡å•Ÿæœå‹™)
- **è¦å‰‡è©•ä¼°**: åŒæ­¥è©•ä¼°ï¼ˆé¢¨éšªè¨ˆç®—å¾Œç«‹å³åŸ·è¡Œï¼‰

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| **6.2.1 è¦å‰‡å¼•æ“æ¶æ§‹** | | | **10h** | â¬œ | | | |
| 6.2.1.1 | Rule Entity è¨­è¨ˆ | Backend | 2 | â¬œ | 6.1 | åŒ…å«æ¢ä»¶è¡¨é”å¼ã€å‹•ä½œé¡å‹ã€å„ªå…ˆç´š | ADR-013 |
| 6.2.1.2 | RuleEvaluator æ ¸å¿ƒè©•ä¼°å™¨ | Backend | 4 | â¬œ | 6.2.1.1 | æ”¯æ´ Python è¡¨é”å¼å®‰å…¨åŸ·è¡Œ (ast.literal_eval) | ADR-013 |
| 6.2.1.3 | RuleRepository ä»‹é¢èˆ‡å¯¦ä½œ | Backend | 2 | â¬œ | 6.2.1.1 | æ”¯æ´è¦å‰‡ CRUD èˆ‡å„ªå…ˆç´šæ’åº | - |
| 6.2.1.4 | RuleAction å‹•ä½œåŸ·è¡Œå™¨ | Backend | 2 | â¬œ | 6.2.1.2 | æ”¯æ´ï¼šå‰µå»ºä»»å‹™ã€ç™¼é€é€šçŸ¥ã€æ¨™è¨˜ç—…æ‚£ | - |
| **6.2.2 é è¨­è¦å‰‡é›†** | | | **12h** | â¬œ | | | |
| 6.2.2.1 | CAT é«˜åˆ†è¦å‰‡ (â‰¥20) | Backend | 2 | â¬œ | 6.2.1 | è§¸ç™¼ï¼šå‰µå»ºé«˜å„ªå…ˆç´šä»»å‹™ | - |
| 6.2.2.2 | mMRC åš´é‡åˆ†ç´šè¦å‰‡ (Grade 3-4) | Backend | 2 | â¬œ | 6.2.1 | è§¸ç™¼ï¼šæ¨™è¨˜ç‚ºé«˜é—œæ³¨ç—…æ‚£ | - |
| 6.2.2.3 | SpO2 ç•°å¸¸è¦å‰‡ (<90%) | Backend | 2 | â¬œ | 6.2.1 | è§¸ç™¼ï¼šç«‹å³é€šçŸ¥ + å‰µå»ºç·Šæ€¥ä»»å‹™ | - |
| 6.2.2.4 | å‘¼å¸å›°é›£æƒ¡åŒ–è¦å‰‡ (3 å¤©å…§æƒ¡åŒ–) | Backend | 2 | â¬œ | 6.2.1 | è§¸ç™¼ï¼šå‰µå»ºè¿½è¹¤ä»»å‹™ | - |
| 6.2.2.5 | å¸è¸å¢åŠ è¦å‰‡ (è¶…éå‰ 7 å¤©å¹³å‡ 1.5x) | Backend | 2 | â¬œ | 6.2.1 | è§¸ç™¼ï¼šå¥åº·æ•™è‚²ä»»å‹™ | - |
| 6.2.2.6 | ç¶œåˆé¢¨éšªè¦å‰‡ (HIGH + å¤šé …ç•°å¸¸) | Backend | 2 | â¬œ | 6.2.1, 6.1 | è§¸ç™¼ï¼šé†«å¸«æœƒè¨ºä»»å‹™ | - |
| **6.2.3 æ•´åˆèˆ‡æ¸¬è©¦** | | | **6h** | â¬œ | | | |
| 6.2.3.1 | è¦å‰‡å¼•æ“æ•´åˆæ¸¬è©¦ | Backend | 3 | â¬œ | 6.2.2 | æ¸¬è©¦æ‰€æœ‰ 6 æ¢è¦å‰‡è§¸ç™¼å ´æ™¯ | - |
| 6.2.3.2 | è¦å‰‡æ–‡æª”æ’°å¯« | Backend | 2 | â¬œ | 6.2.2 | Markdown æ ¼å¼ï¼ŒåŒ…å«è§¸ç™¼æ¢ä»¶èˆ‡å‹•ä½œèªªæ˜ | - |
| 6.2.3.3 | èˆ‡ Risk Engine æ•´åˆæ¸¬è©¦ | Backend | 1 | â¬œ | 6.1, 6.2.2 | ç«¯åˆ°ç«¯æ¸¬è©¦ï¼šSurvey â†’ Risk â†’ Rules â†’ Task | - |

**Definition of Done (DoD)**:
- [ ] è‡³å°‘ 10 æ¢è‡¨åºŠè¦å‰‡æ­£å¸¸é‹ä½œ
- [ ] è¦å‰‡è©•ä¼°æ€§èƒ½ < 100ms (P95)
- [ ] è¦å‰‡æ–‡æª”å®Œæ•´ï¼ˆæ¢ä»¶ã€å‹•ä½œã€å„ªå…ˆç´šï¼‰
- [ ] æ”¯æ´ç†±æ›´æ–°ï¼ˆæ–°å¢è¦å‰‡ç„¡éœ€é‡å•Ÿæœå‹™ï¼‰
- [ ] éŒ¯èª¤è™•ç†ï¼šè¦å‰‡åŸ·è¡Œå¤±æ•—ä¸å½±éŸ¿é¢¨éšªè¨ˆç®—
- [ ] æ•´åˆæ¸¬è©¦é€šéï¼šSurvey/DailyLog â†’ Risk â†’ Rules â†’ Task

**é è¨­è¦å‰‡æ¸…å–®** (ç¯„ä¾‹):
```yaml
rules:
  - id: RULE_001
    name: "CATé«˜åˆ†é è­¦"
    condition: "cat_score >= 20"
    action: "CREATE_TASK"
    priority: "HIGH"
    task_template: "CATè©•åˆ†éé«˜ï¼Œå»ºè­°å®‰æ’é†«å¸«æœƒè¨º"

  - id: RULE_002
    name: "SpO2å±éšªå€¼"
    condition: "spo2 < 90"
    action: "CREATE_TASK + SEND_NOTIFICATION"
    priority: "URGENT"
    task_template: "è¡€æ°§æ¿ƒåº¦éä½ï¼Œç«‹å³è¯ç¹«ç—…æ‚£"
```

---

### 6.3 ä»»å‹™ç®¡ç† API [24h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹æ²»ç™‚å¸«ä»»å‹™ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´æ‰‹å‹•å‰µå»ºã€è¦å‰‡è‡ªå‹•ç”Ÿæˆã€ç‹€æ…‹è¿½è¹¤ã€åˆ†é…èˆ‡å®Œæˆæµç¨‹ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **ä»»å‹™ç‹€æ…‹æµè½‰**: TODO â†’ IN_PROGRESS â†’ DONE (æ”¯æ´ CANCELLED)
- **è‡ªå‹•åˆ†é…é‚è¼¯**:
  - é«˜å„ªå…ˆç´šä»»å‹™ â†’ åˆ†é…çµ¦ç—…æ‚£çš„ä¸»æ²»ç™‚å¸«
  - ä¸€èˆ¬ä»»å‹™ â†’ é€²å…¥å¾…åˆ†é…æ± 
- **ä»»å‹™é¡å‹**: MEDICAL_CONSULT, HEALTH_EDUCATION, FOLLOW_UP, EMERGENCY, CUSTOM

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **6.3.1 Task Entity + API** | | | **12h** | â¬œ | | |
| 6.3.1.1 | Task Entity è¨­è¨ˆ | Backend | 3 | â¬œ | 6.2 | åŒ…å«ï¼šæ¨™é¡Œã€æè¿°ã€å„ªå…ˆç´šã€ç‹€æ…‹ã€åˆ†é…å°è±¡ã€é—œè¯ç—…æ‚£ |
| 6.3.1.2 | TaskRepository ä»‹é¢èˆ‡å¯¦ä½œ | Backend | 3 | â¬œ | 6.3.1.1 | æ”¯æ´å¤šæ¢ä»¶æŸ¥è©¢ï¼ˆç—…æ‚£ã€æ²»ç™‚å¸«ã€ç‹€æ…‹ã€å„ªå…ˆç´šï¼‰ |
| 6.3.1.3 | `POST /tasks` - å‰µå»ºä»»å‹™ | Backend | 2 | â¬œ | 6.3.1.2 | æ”¯æ´æ‰‹å‹•èˆ‡è‡ªå‹•å‰µå»º |
| 6.3.1.4 | `GET /tasks` - æŸ¥è©¢ä»»å‹™åˆ—è¡¨ | Backend | 2 | â¬œ | 6.3.1.2 | æ”¯æ´åˆ†é ã€éæ¿¾ã€æ’åº |
| 6.3.1.5 | `PATCH /tasks/{id}` - æ›´æ–°ä»»å‹™ç‹€æ…‹ | Backend | 2 | â¬œ | 6.3.1.2 | æ”¯æ´ç‹€æ…‹æµè½‰é©—è­‰ |
| **6.3.2 è‡ªå‹•ä»»å‹™ç”Ÿæˆ** | | | **8h** | â¬œ | | |
| 6.3.2.1 | Domain Event: RiskScoreCalculatedEvent â†’ Create Task | Backend | 3 | â¬œ | 6.1, 6.3.1 | é«˜é¢¨éšªç—…æ‚£è‡ªå‹•ç”Ÿæˆä»»å‹™ |
| 6.3.2.2 | Domain Event: AnomalyDetectedEvent â†’ Create Task | Backend | 3 | â¬œ | 6.2, 6.3.1 | ç•°å¸¸è¦å‰‡è§¸ç™¼ä»»å‹™ç”Ÿæˆ |
| 6.3.2.3 | TaskPriorityCalculator - å„ªå…ˆç´šè¨ˆç®—é‚è¼¯ | Backend | 2 | â¬œ | 6.3.2.1, 6.3.2.2 | åŸºæ–¼é¢¨éšªç­‰ç´šã€ç•°å¸¸é¡å‹è¨ˆç®—å„ªå…ˆç´š |
| **6.3.3 ä»»å‹™åˆ†é…é‚è¼¯** | | | **4h** | â¬œ | | |
| 6.3.3.1 | TaskAssignmentService - è‡ªå‹•åˆ†é…é‚è¼¯ | Backend | 2 | â¬œ | 6.3.1, 4.1 | åŸºæ–¼ç—…æ‚£-æ²»ç™‚å¸«é—œä¿‚åˆ†é… |
| 6.3.3.2 | `POST /tasks/{id}/assign` - æ‰‹å‹•åˆ†é… | Backend | 1 | â¬œ | 6.3.1 | æ²»ç™‚å¸«å¯æ‰‹å‹•æ¥æ‰‹æˆ–è½‰äº¤ä»»å‹™ |
| 6.3.3.3 | æ¸¬è©¦ï¼šè‡ªå‹•åˆ†é…æµç¨‹ | Backend | 1 | â¬œ | 6.3.3.1 | æ¸¬è©¦å„ç¨®åˆ†é…å ´æ™¯ |

**Definition of Done (DoD)**:
- [ ] æ‰€æœ‰ 5 å€‹ CRUD API endpoints å¯¦ä½œå®Œæˆ
- [ ] è‡ªå‹•ä»»å‹™ç”Ÿæˆæ¸¬è©¦é€šéï¼ˆé«˜é¢¨éšª + ç•°å¸¸è¦å‰‡ï¼‰
- [ ] ä»»å‹™ç‹€æ…‹æµè½‰é©—è­‰æ­£ç¢ºï¼ˆç¦æ­¢éæ³•ç‹€æ…‹è½‰æ›ï¼‰
- [ ] è‡ªå‹•åˆ†é…é‚è¼¯æ¸¬è©¦é€šéï¼ˆä¸»æ²»ç™‚å¸«å„ªå…ˆï¼‰
- [ ] Integration Tests æ¶µè“‹ï¼šRisk â†’ Rules â†’ Task â†’ Assignment
- [ ] ä»»å‹™é€šçŸ¥æ©Ÿåˆ¶æ•´åˆï¼ˆå‰µå»ºä»»å‹™å¾Œé€šçŸ¥æ²»ç™‚å¸«ï¼‰

---

### 6.4 Dashboard é è­¦ä¸­å¿ƒ [20h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹æ²»ç™‚å¸«å·¥ä½œå°ï¼Œæä¾›é¢¨éšªç—…æ‚£æ¸…å–®ã€ä»»å‹™çœ‹æ¿ã€å¿«é€Ÿè™•ç†ä»‹é¢ï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **UI æ¡†æ¶**: Next.js (Dashboard æ—¢æœ‰æ¶æ§‹)
- **ç‹€æ…‹ç®¡ç†**: TanStack Query (èˆ‡ Task 5.1 ä¸€è‡´)
- **è¦–è¦ºè¨­è¨ˆ**: Ant Design (Table, Card, Tag, Badge)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **6.4.1 é è­¦æ¸…å–®é é¢** | | | **12h** | â¬œ | | |
| 6.4.1.1 | AlertList Component - é«˜é¢¨éšªç—…æ‚£åˆ—è¡¨ | Frontend | 6 | â¬œ | 6.1, 5.1 | æ•´åˆ Risk APIï¼Œé¡¯ç¤ºé¢¨éšªåˆ†æ•¸èˆ‡è¶¨å‹¢ |
| 6.4.1.2 | Filter & Sort - å¤šæ¢ä»¶ç¯©é¸æ’åº | Frontend | 3 | â¬œ | 6.4.1.1 | æ”¯æ´æŒ‰é¢¨éšªç­‰ç´šã€æ—¥æœŸã€æ²»ç™‚å¸«éæ¿¾ |
| 6.4.1.3 | RiskTrendChart - é¢¨éšªè¶¨å‹¢åœ– (å¯é¸) | Frontend | 3 | â¬œ | 6.4.1.1 | ä½¿ç”¨ Recharts é¡¯ç¤ºæ­·å²è¶¨å‹¢ |
| **6.4.2 ä»»å‹™ç®¡ç†ä»‹é¢** | | | **6h** | â¬œ | | |
| 6.4.2.1 | TaskBoard Component - Kanban çœ‹æ¿ | Frontend | 4 | â¬œ | 6.3 | æ”¯æ´æ‹–æ‹½æ›´æ–°ç‹€æ…‹ (TODO/DOING/DONE) |
| 6.4.2.2 | TaskDetail Modal - ä»»å‹™è©³æƒ…å½ˆçª— | Frontend | 2 | â¬œ | 6.4.2.1 | é¡¯ç¤ºä»»å‹™æè¿°ã€é—œè¯ç—…æ‚£ã€æ“ä½œæŒ‰éˆ• |
| **6.4.3 æ¸¬è©¦èˆ‡ä¿®å¾©** | | | **2h** | â¬œ | | |
| 6.4.3.1 | æ‰‹å‹•æ¸¬è©¦èˆ‡ Bug ä¿®å¾© | Frontend | 2 | â¬œ | 6.4.1, 6.4.2 | E2E æ¸¬è©¦é è­¦æµç¨‹ |

**Definition of Done (DoD)**:
- [ ] é è­¦æ¸…å–®å¯æŸ¥çœ‹æ‰€æœ‰é«˜é¢¨éšªç—…æ‚£
- [ ] æ”¯æ´æŒ‰é¢¨éšªç­‰ç´šã€æ—¥æœŸç¯©é¸
- [ ] ä»»å‹™çœ‹æ¿æ”¯æ´æ‹–æ‹½æ›´æ–°ç‹€æ…‹
- [ ] ä»»å‹™è©³æƒ…åŒ…å«ç—…æ‚£è³‡è¨Šèˆ‡æ“ä½œæŒ‰éˆ•
- [ ] æ•´åˆæ¸¬è©¦ï¼šRisk â†’ Alert â†’ Task â†’ Dashboard
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ”¯æ´ 1024px+ è¢å¹•ï¼‰

---

### 6.5 Sprint 4 æ•´åˆæ¸¬è©¦èˆ‡æ–‡æª” [å¾…è£œå……æ™‚æ•¸]

**å»ºè­°è¿½åŠ **: 4-8h ç”¨æ–¼ç«¯åˆ°ç«¯æ¸¬è©¦èˆ‡æ–‡æª”æ’°å¯«

---

## Sprint 5: RAG ç³»çµ±åŸºç¤ [80h]

**Sprint ç›®æ¨™**: å»ºç«‹ RAG (Retrieval-Augmented Generation) ç³»çµ±åŸºç¤æ¶æ§‹ï¼Œæ”¯æ´è¡›æ•™å…§å®¹ç®¡ç†ã€å‘é‡åŒ–ã€æ··åˆæª¢ç´¢ï¼Œç‚º Sprint 6 çš„ AI èªéŸ³å•ç­”æä¾›çŸ¥è­˜åº«æ”¯æ’ã€‚

**æ™‚ç¨‹**: Week 9-10 (2 weeks)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… pgvector æ“´å±•é…ç½®èˆ‡å‘é‡è¡¨è¨­è¨ˆ
- âœ… è¡›æ•™å…§å®¹ç®¡ç† API (CRUD + ç‰ˆæœ¬æ§åˆ¶)
- âœ… Hybrid æª¢ç´¢å¯¦ä½œ (Dense + Sparse)
- âœ… Dashboard è¡›æ•™ç®¡ç†é é¢

**æŠ€è¡“æ±ºç­–åƒè€ƒ**:
- [ADR-014] RAG æ¶æ§‹è¨­è¨ˆèˆ‡å‘é‡è³‡æ–™åº«é¸å‹ (å¾…å‰µå»º)
- [ADR-015] æ··åˆæª¢ç´¢ç­–ç•¥ (Dense + Sparse) (å¾…å‰µå»º)

---

### 7.1 pgvector æ“´å±•èˆ‡å‘é‡åŒ– [24h]

**æ¥­å‹™ç›®æ¨™**: é…ç½® PostgreSQL pgvector æ“´å±•ï¼Œå»ºç«‹å‘é‡è¡¨ï¼Œå¯¦ä½œæ–‡æœ¬åµŒå…¥æœå‹™ï¼Œæ”¯æ´èªç¾©æª¢ç´¢ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **å‘é‡æ¨¡å‹**: OpenAI `text-embedding-3-small` (1536 ç¶­)
- **å‘é‡å„²å­˜**: PostgreSQL pgvector (æ”¯æ´ HNSW ç´¢å¼•)
- **ç›¸ä¼¼åº¦åº¦é‡**: Cosine Similarity

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| **7.1.1 pgvector é…ç½®** | | | **6h** | â¬œ | | | |
| 7.1.1.1 | Docker Compose pgvector æ“´å±•å®‰è£ | DevOps | 2 | â¬œ | 3.1 | Postgres 15 + pgvector 0.5+ | - |
| 7.1.1.2 | å‘é‡è¡¨ Migration è¨­è¨ˆ | Backend | 2 | â¬œ | 7.1.1.1, 2.2 | `health_contents` è¡¨æ–°å¢ `embedding vector(1536)` æ¬„ä½ | ADR-014 |
| 7.1.1.3 | HNSW ç´¢å¼•å»ºç«‹ | Backend | 2 | â¬œ | 7.1.1.2 | `CREATE INDEX ON health_contents USING hnsw (embedding vector_cosine_ops)` | ADR-014 |
| **7.1.2 Embedding Service** | | | **10h** | â¬œ | | | |
| 7.1.2.1 | OpenAI Embedding API å°è£ | Backend | 4 | â¬œ | - | æ”¯æ´æ‰¹æ¬¡åµŒå…¥ï¼ˆæœ€å¤š 2048 tokens/requestï¼‰ | - |
| 7.1.2.2 | EmbeddingCache Service (Redis) | Backend | 3 | â¬œ | 7.1.2.1, 3.1.3 | å¿«å–å¸¸è¦‹æŸ¥è©¢ï¼Œæ¸›å°‘ API æˆæœ¬ | - |
| 7.1.2.3 | å‘é‡åŒ–ä»»å‹™ä½‡åˆ— (å¯é¸) | Backend | 3 | â¬œ | 7.1.2.1 | ä½¿ç”¨ RabbitMQ è™•ç†å¤§é‡æ–‡æœ¬åµŒå…¥ | - |
| **7.1.3 æ¸¬è©¦èˆ‡é©—è­‰** | | | **8h** | â¬œ | | | |
| 7.1.3.1 | å‘é‡ç›¸ä¼¼åº¦æ¸¬è©¦ | Backend | 3 | â¬œ | 7.1.2 | é©—è­‰èªç¾©ç›¸ä¼¼æ–‡æœ¬æª¢ç´¢æº–ç¢ºæ€§ | - |
| 7.1.3.2 | æ€§èƒ½æ¸¬è©¦ï¼š10k å‘é‡æª¢ç´¢ | Backend | 3 | â¬œ | 7.1.1.3 | ç›®æ¨™: Top-10 æª¢ç´¢ < 100ms | - |
| 7.1.3.3 | æˆæœ¬ä¼°ç®—èˆ‡å„ªåŒ– | Backend | 2 | â¬œ | 7.1.2 | è¨ˆç®— Embedding API æˆæœ¬ï¼Œèª¿æ•´å¿«å–ç­–ç•¥ | - |

**Definition of Done (DoD)**:
- [ ] pgvector æ“´å±•æˆåŠŸå®‰è£ä¸¦å¯ç”¨
- [ ] å‘é‡è¡¨æ”¯æ´ HNSW ç´¢å¼•æŸ¥è©¢
- [ ] Embedding Service æ”¯æ´æ‰¹æ¬¡åµŒå…¥
- [ ] å¿«å–å‘½ä¸­ç‡ > 60% (æ¸›å°‘ API å‘¼å«)
- [ ] æ€§èƒ½æ¸¬è©¦ï¼š10k å‘é‡æª¢ç´¢ < 100ms (P95)
- [ ] æˆæœ¬æ–‡æª”ï¼šé ä¼°æ¯æœˆ Embedding API æˆæœ¬

---

### 7.2 è¡›æ•™å…§å®¹ç®¡ç† API [20h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹è¡›æ•™å…§å®¹ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´ Markdown æ ¼å¼å…§å®¹ã€åˆ†é¡æ¨™ç±¤ã€ç‰ˆæœ¬æ§åˆ¶ã€å¯©æ ¸æµç¨‹ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **å…§å®¹æ ¼å¼**: Markdown (æ”¯æ´åœ–ç‰‡ã€è¡¨æ ¼ã€ç¨‹å¼ç¢¼å€å¡Š)
- **åˆ†é¡ç³»çµ±**: å¤šæ¨™ç±¤æ”¯æ´ (tags: ["COPDåŸºç¤çŸ¥è­˜", "è—¥ç‰©æ²»ç™‚", "é‹å‹•æŒ‡å°"])
- **ç‰ˆæœ¬æ§åˆ¶**: ç°¡å–®ç‰ˆæœ¬è™Ÿ (v1, v2, ...) + ç™¼å¸ƒç‹€æ…‹ (DRAFT, PUBLISHED, ARCHIVED)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **7.2.1 Content Entity + Repository** | | | **8h** | â¬œ | | |
| 7.2.1.1 | HealthContent Entity è¨­è¨ˆ | Backend | 2 | â¬œ | 7.1 | åŒ…å«ï¼šæ¨™é¡Œã€å…§å®¹ã€æ¨™ç±¤ã€ç‰ˆæœ¬ã€ç‹€æ…‹ã€åµŒå…¥å‘é‡ |
| 7.2.1.2 | ContentRepository ä»‹é¢èˆ‡å¯¦ä½œ | Backend | 4 | â¬œ | 7.2.1.1 | æ”¯æ´å…¨æ–‡æª¢ç´¢ (PostgreSQL FTS) + å‘é‡æª¢ç´¢ |
| 7.2.1.3 | ContentVersioning Service | Backend | 2 | â¬œ | 7.2.1.1 | ç°¡å–®ç‰ˆæœ¬ç®¡ç†ï¼šå‰µå»ºæ–°ç‰ˆæœ¬ã€æ¯”è¼ƒå·®ç•° |
| **7.2.2 Content API Endpoints** | | | **8h** | â¬œ | | |
| 7.2.2.1 | `POST /health-contents` - å‰µå»ºå…§å®¹ | Backend | 2 | â¬œ | 7.2.1 | è‡ªå‹•è§¸ç™¼å‘é‡åŒ– |
| 7.2.2.2 | `GET /health-contents` - æŸ¥è©¢åˆ—è¡¨ | Backend | 2 | â¬œ | 7.2.1 | æ”¯æ´æ¨™ç±¤éæ¿¾ã€ç‹€æ…‹éæ¿¾ã€åˆ†é  |
| 7.2.2.3 | `GET /health-contents/{id}` - æŸ¥è©¢è©³æƒ… | Backend | 1 | â¬œ | 7.2.1 | åŒ…å«ç‰ˆæœ¬æ­·å² |
| 7.2.2.4 | `PATCH /health-contents/{id}` - æ›´æ–°å…§å®¹ | Backend | 2 | â¬œ | 7.2.1 | å‰µå»ºæ–°ç‰ˆæœ¬ï¼Œé‡æ–°å‘é‡åŒ– |
| 7.2.2.5 | `POST /health-contents/{id}/publish` - ç™¼å¸ƒå…§å®¹ | Backend | 1 | â¬œ | 7.2.1 | ç‹€æ…‹è®Šæ›´ï¼šDRAFT â†’ PUBLISHED |
| **7.2.3 è‡ªå‹•å‘é‡åŒ–æ•´åˆ** | | | **4h** | â¬œ | | |
| 7.2.3.1 | Domain Event: ContentCreatedEvent â†’ Embed | Backend | 2 | â¬œ | 7.1, 7.2.2.1 | å…§å®¹å‰µå»ºå¾Œè‡ªå‹•åµŒå…¥ |
| 7.2.3.2 | Domain Event: ContentUpdatedEvent â†’ Re-embed | Backend | 2 | â¬œ | 7.1, 7.2.2.4 | å…§å®¹æ›´æ–°å¾Œé‡æ–°åµŒå…¥ |

**Definition of Done (DoD)**:
- [ ] æ‰€æœ‰ 6 å€‹ CRUD API endpoints å¯¦ä½œå®Œæˆ
- [ ] æ”¯æ´ Markdown å…§å®¹å„²å­˜èˆ‡æ¸²æŸ“
- [ ] å…§å®¹å‰µå»º/æ›´æ–°è‡ªå‹•è§¸ç™¼å‘é‡åŒ–
- [ ] ç‰ˆæœ¬æ§åˆ¶ï¼šå¯æŸ¥çœ‹æ­·å²ç‰ˆæœ¬
- [ ] ç™¼å¸ƒæµç¨‹ï¼šDRAFT â†’ PUBLISHED ç‹€æ…‹æµè½‰
- [ ] Integration Tests æ¶µè“‹ï¼šCRUD + è‡ªå‹•åµŒå…¥

---

### 7.3 Hybrid æª¢ç´¢å¯¦ä½œ [28h]

**æ¥­å‹™ç›®æ¨™**: å¯¦ä½œæ··åˆæª¢ç´¢ç­–ç•¥ï¼Œçµåˆ Dense (å‘é‡ç›¸ä¼¼åº¦) èˆ‡ Sparse (é—œéµå­—åŒ¹é…) æª¢ç´¢ï¼Œæå‡æª¢ç´¢æº–ç¢ºæ€§èˆ‡å¬å›ç‡ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **Dense Retrieval**: pgvector Cosine Similarity (èªç¾©æª¢ç´¢)
- **Sparse Retrieval**: PostgreSQL Full-Text Search (é—œéµå­—æª¢ç´¢)
- **èåˆç­–ç•¥**: Reciprocal Rank Fusion (RRF) ç®—æ³•

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| **7.3.1 Dense Retrieval** | | | **8h** | â¬œ | | | |
| 7.3.1.1 | DenseRetriever Service | Backend | 4 | â¬œ | 7.1 | pgvector ç›¸ä¼¼åº¦æª¢ç´¢ (Top-K) | ADR-015 |
| 7.3.1.2 | æŸ¥è©¢å„ªåŒ–ï¼šç›¸ä¼¼åº¦é–¾å€¼éæ¿¾ | Backend | 2 | â¬œ | 7.3.1.1 | éæ¿¾ä½ç›¸ä¼¼åº¦çµæœ (threshold > 0.7) | - |
| 7.3.1.3 | æ¸¬è©¦ï¼šèªç¾©æª¢ç´¢æº–ç¢ºæ€§ | Backend | 2 | â¬œ | 7.3.1.1 | äººå·¥æ¨™è¨»æ¸¬è©¦é›†é©—è­‰å¬å›ç‡ | - |
| **7.3.2 Sparse Retrieval** | | | **8h** | â¬œ | | | |
| 7.3.2.1 | Full-Text Search ç´¢å¼•å»ºç«‹ | Backend | 2 | â¬œ | 7.2 | `tsvector` æ¬„ä½ + GIN ç´¢å¼• | - |
| 7.3.2.2 | SparseRetriever Service | Backend | 4 | â¬œ | 7.3.2.1 | PostgreSQL `ts_rank` æ’åº | ADR-015 |
| 7.3.2.3 | ä¸­æ–‡åˆ†è©å„ªåŒ– (å¯é¸) | Backend | 2 | â¬œ | 7.3.2.2 | ä½¿ç”¨ `zhparser` æ“´å±•æˆ–è‡ªå»ºåˆ†è© | - |
| **7.3.3 Hybrid Fusion** | | | **12h** | â¬œ | | | |
| 7.3.3.1 | RRF Fusion Algorithm å¯¦ä½œ | Backend | 4 | â¬œ | 7.3.1, 7.3.2 | Reciprocal Rank Fusion èåˆæ’åº | ADR-015 |
| 7.3.3.2 | HybridRetriever Service | Backend | 4 | â¬œ | 7.3.3.1 | æ•´åˆ Dense + Sparseï¼Œè¼¸å‡ºèåˆçµæœ | ADR-015 |
| 7.3.3.3 | `POST /search/hybrid` API | Backend | 2 | â¬œ | 7.3.3.2 | æ”¯æ´æŸ¥è©¢åƒæ•¸ï¼šquery, top_k, threshold | - |
| 7.3.3.4 | æª¢ç´¢æ€§èƒ½æ¸¬è©¦èˆ‡èª¿å„ª | Backend | 2 | â¬œ | 7.3.3.3 | ç›®æ¨™: æª¢ç´¢ + èåˆ < 200ms | - |

**Definition of Done (DoD)**:
- [ ] Dense Retrieval èªç¾©æª¢ç´¢æº–ç¢ºæ€§ > 80%
- [ ] Sparse Retrieval é—œéµå­—æª¢ç´¢å¬å›ç‡ > 70%
- [ ] Hybrid Retrieval æ•´é«”æº–ç¢ºæ€§ > 85%
- [ ] æª¢ç´¢æ€§èƒ½ < 200ms (P95)
- [ ] API æ”¯æ´ Top-K åƒæ•¸ (é è¨­ K=10)
- [ ] æ¸¬è©¦é›†è¦†è“‹ï¼šè‡³å°‘ 50 çµ„æŸ¥è©¢-ç­”æ¡ˆå°

**RRF èåˆå…¬å¼**:
```python
def reciprocal_rank_fusion(dense_results, sparse_results, k=60):
    scores = {}
    for rank, doc in enumerate(dense_results):
        scores[doc.id] = scores.get(doc.id, 0) + 1 / (k + rank + 1)
    for rank, doc in enumerate(sparse_results):
        scores[doc.id] = scores.get(doc.id, 0) + 1 / (k + rank + 1)
    return sorted(scores.items(), key=lambda x: x[1], reverse=True)
```

---

### 7.4 Dashboard è¡›æ•™ç®¡ç†é  [8h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹æ²»ç™‚å¸«è¡›æ•™å…§å®¹ç®¡ç†ä»‹é¢ï¼Œæ”¯æ´å…§å®¹ CRUDã€Markdown é è¦½ã€æ¨™ç±¤ç®¡ç†ã€ç™¼å¸ƒæµç¨‹ã€‚

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 7.4.1 | ContentList Component - å…§å®¹åˆ—è¡¨ | Frontend | 3 | â¬œ | 7.2 | æ”¯æ´æ¨™ç±¤éæ¿¾ã€ç‹€æ…‹éæ¿¾ã€åˆ†é  |
| 7.4.2 | ContentEditor Component - Markdown ç·¨è¼¯å™¨ | Frontend | 3 | â¬œ | 7.2 | ä½¿ç”¨ `react-markdown-editor-lite` |
| 7.4.3 | ContentPreview - æ¸²æŸ“é è¦½ | Frontend | 1 | â¬œ | 7.4.2 | ä½¿ç”¨ `react-markdown` æ¸²æŸ“ |
| 7.4.4 | ç™¼å¸ƒæµç¨‹ UI (DRAFT â†’ PUBLISHED) | Frontend | 1 | â¬œ | 7.2 | ç‹€æ…‹åˆ‡æ›æŒ‰éˆ• + ç¢ºèªå½ˆçª— |

**Definition of Done (DoD)**:
- [ ] æ”¯æ´ Markdown ç·¨è¼¯èˆ‡å³æ™‚é è¦½
- [ ] æ”¯æ´æ¨™ç±¤ç®¡ç†ï¼ˆæ–°å¢ã€åˆªé™¤æ¨™ç±¤ï¼‰
- [ ] æ”¯æ´ç™¼å¸ƒæµç¨‹ï¼ˆDRAFT â†’ PUBLISHEDï¼‰
- [ ] æ•´åˆæ¸¬è©¦ï¼šå‰µå»º â†’ ç·¨è¼¯ â†’ ç™¼å¸ƒ â†’ æª¢ç´¢

---

## Sprint 6: AI èªéŸ³è™•ç†éˆ + ç‡Ÿé¤Šè©•ä¼° [144h]

**Sprint ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„ AI èªéŸ³å•ç­”è™•ç†éˆ (STT â†’ LLM â†’ TTS)ï¼Œæ•´åˆ RAG ç³»çµ±ï¼Œå¯¦ç¾ LIFF èªéŸ³æå•åŠŸèƒ½ã€‚**åŒæ™‚è£œå……å»¶å¾Œçš„ç‡Ÿé¤Šè©•ä¼°åŠŸèƒ½**ã€‚

**æ™‚ç¨‹**: Week 11-12 (2 weeks)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… RabbitMQ ä»»å‹™ä½‡åˆ—é…ç½®
- âœ… AI Worker æœå‹™ (STT/LLM/TTS)
- âœ… LIFF èªéŸ³éŒ„è£½ä»‹é¢
- âœ… WebSocket æ¨é€æ©Ÿåˆ¶
- âœ… ç‡Ÿé¤Šè©•ä¼° KPI (MNA-SF/MUST é‡è¡¨ + InBody æŒ‡æ¨™)

**æŠ€è¡“æ±ºç­–åƒè€ƒ**:
- [ADR-016] AI Worker æ¶æ§‹è¨­è¨ˆ (å¾…å‰µå»º)
- [ADR-017] WebSocket vs Server-Sent Events (å¾…å‰µå»º)

---

### 8.1 RabbitMQ ä»»å‹™ä½‡åˆ— [16h]

**æ¥­å‹™ç›®æ¨™**: é…ç½® RabbitMQ è¨Šæ¯ä½‡åˆ—ï¼Œæ”¯æ´ AI èªéŸ³è™•ç†ä»»å‹™çš„ç•°æ­¥è™•ç†ã€å¤±æ•—é‡è©¦ã€å„ªå…ˆç´šä½‡åˆ—ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **ä½‡åˆ—è¨­è¨ˆ**:
  - `voice_processing_queue` (é«˜å„ªå…ˆç´š)
  - `voice_processing_queue_low` (ä½å„ªå…ˆç´š)
  - `dlx_voice_processing` (æ­»ä¿¡ä½‡åˆ—)
- **äº¤æ›å™¨**: Direct Exchange (åŸºæ–¼ routing_key è·¯ç”±)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| 8.1.1 | RabbitMQ Docker é…ç½® | DevOps | 2 | â¬œ | 3.1.4 | æ›´æ–° docker-compose.ymlï¼Œå•Ÿç”¨ç®¡ç†ä»‹é¢ | - |
| 8.1.2 | ä½‡åˆ—èˆ‡äº¤æ›å™¨è¨­è¨ˆ | Backend | 4 | â¬œ | 8.1.1 | å®šç¾©ä½‡åˆ—å±¬æ€§ï¼ˆTTLã€å„ªå…ˆç´šã€DLXï¼‰ | ADR-016 |
| 8.1.3 | RabbitMQ Client å°è£ (pika) | Backend | 4 | â¬œ | 8.1.2 | æ”¯æ´ç™¼å¸ƒ/æ¶ˆè²»ã€é€£ç·šæ± ã€é‡é€£æ©Ÿåˆ¶ | - |
| 8.1.4 | ä»»å‹™åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ– | Backend | 2 | â¬œ | 8.1.3 | JSON åºåˆ—åŒ– VoiceTask Model | - |
| 8.1.5 | å¤±æ•—é‡è©¦æ©Ÿåˆ¶ | Backend | 2 | â¬œ | 8.1.3 | æœ€å¤šé‡è©¦ 3 æ¬¡ï¼Œå¤±æ•—é€²å…¥ DLX | - |
| 8.1.6 | ç›£æ§èˆ‡å‘Šè­¦é…ç½® | DevOps | 2 | â¬œ | 8.1.1 | Prometheus + Grafana ç›£æ§ä½‡åˆ—é•·åº¦ | - |

**Definition of Done (DoD)**:
- [ ] RabbitMQ æœå‹™æ­£å¸¸é‹è¡Œ
- [ ] ä½‡åˆ—æ”¯æ´å„ªå…ˆç´šï¼ˆ1-10ï¼‰
- [ ] å¤±æ•—é‡è©¦æ©Ÿåˆ¶æ¸¬è©¦é€šé
- [ ] æ­»ä¿¡ä½‡åˆ—å¯æŸ¥çœ‹å¤±æ•—ä»»å‹™
- [ ] ç›£æ§å„€è¡¨æ¿é¡¯ç¤ºä½‡åˆ—é•·åº¦ã€æ¶ˆè²»é€Ÿç‡

---

### 8.2 AI Worker æœå‹™ [40h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹ AI Worker å¾®æœå‹™ï¼Œè™•ç†èªéŸ³è½‰æ–‡å­—ï¼ˆSTTï¼‰ã€RAG æª¢ç´¢ã€LLM ç”Ÿæˆã€æ–‡å­—è½‰èªéŸ³ï¼ˆTTSï¼‰å®Œæ•´éˆè·¯ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **STT**: OpenAI Whisper API
- **LLM**: OpenAI GPT-4 Turbo (æ”¯æ´ RAG context)
- **TTS**: OpenAI TTS API (alloy voice)
- **éƒ¨ç½²**: ç¨ç«‹ FastAPI æœå‹™ + Docker å®¹å™¨åŒ–

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| **8.2.1 STT (Speech-to-Text)** | | | **8h** | â¬œ | | | |
| 8.2.1.1 | OpenAI Whisper API å°è£ | AI/ML | 3 | â¬œ | - | æ”¯æ´ mp3/m4a/webm æ ¼å¼ï¼Œæœ€å¤§ 25MB | - |
| 8.2.1.2 | éŸ³æª”é è™•ç† (é™å™ªã€æ ¼å¼è½‰æ›) | AI/ML | 3 | â¬œ | 8.2.1.1 | ä½¿ç”¨ `pydub` é€²è¡ŒéŸ³æª”è™•ç† | - |
| 8.2.1.3 | STT æ¸¬è©¦èˆ‡æº–ç¢ºæ€§é©—è­‰ | AI/ML | 2 | â¬œ | 8.2.1.2 | æ¸¬è©¦ä¸­æ–‡ã€å°èªã€æ··é›œå ´æ™¯ | - |
| **8.2.2 RAG Retrieval** | | | **8h** | â¬œ | | | |
| 8.2.2.1 | QueryRewriter - æŸ¥è©¢æ”¹å¯« | AI/ML | 3 | â¬œ | 7.3 | ä½¿ç”¨ LLM æ”¹å¯«å£èªæŸ¥è©¢ç‚ºæª¢ç´¢å‹å–„æ ¼å¼ | - |
| 8.2.2.2 | æ•´åˆ Hybrid Retriever | Backend | 2 | â¬œ | 7.3, 8.2.2.1 | èª¿ç”¨ `/search/hybrid` API | - |
| 8.2.2.3 | Context Builder - æ§‹å»º RAG Prompt | AI/ML | 3 | â¬œ | 8.2.2.2 | å°‡æª¢ç´¢çµæœæ ¼å¼åŒ–ç‚º LLM Context | - |
| **8.2.3 LLM Generation** | | | **10h** | â¬œ | | | |
| 8.2.3.1 | OpenAI GPT-4 API å°è£ | AI/ML | 3 | â¬œ | - | æ”¯æ´ streaming response | - |
| 8.2.3.2 | PromptTemplate è¨­è¨ˆ | AI/ML | 4 | â¬œ | 8.2.3.1 | ç³»çµ±æç¤ºè©ï¼šCOPD è¡›æ•™å°ˆå®¶è§’è‰² | - |
| 8.2.3.3 | å›æ‡‰å“è³ªé©—è­‰èˆ‡èª¿å„ª | AI/ML | 3 | â¬œ | 8.2.3.2 | æ¸¬è©¦å›æ‡‰æº–ç¢ºæ€§ã€å‹å–„åº¦ã€å®‰å…¨æ€§ | - |
| **8.2.4 TTS (Text-to-Speech)** | | | **6h** | â¬œ | | | |
| 8.2.4.1 | OpenAI TTS API å°è£ | AI/ML | 2 | â¬œ | - | ä½¿ç”¨ `alloy` voiceï¼Œç”Ÿæˆ mp3 | - |
| 8.2.4.2 | éŸ³æª”å„²å­˜ (MinIO) | Backend | 2 | â¬œ | 8.2.4.1, 3.1.5 | ä¸Šå‚³åˆ° MinIOï¼Œè¿”å› URL | - |
| 8.2.4.3 | TTS å¿«å–ç­–ç•¥ | Backend | 2 | â¬œ | 8.2.4.2 | ç›¸åŒæ–‡æœ¬å¿«å–éŸ³æª”ï¼Œæ¸›å°‘ API å‘¼å« | - |
| **8.2.5 Worker ä¸»æµç¨‹** | | | **8h** | â¬œ | | | |
| 8.2.5.1 | VoiceTask Consumer - ä»»å‹™æ¶ˆè²»è€… | Backend | 3 | â¬œ | 8.1, 8.2.1-8.2.4 | å¾ RabbitMQ æ¶ˆè²»ä»»å‹™ | ADR-016 |
| 8.2.5.2 | è™•ç†éˆè·¯æ•´åˆ (STTâ†’RAGâ†’LLMâ†’TTS) | AI/ML | 3 | â¬œ | 8.2.5.1 | å®Œæ•´éˆè·¯æ¸¬è©¦ | - |
| 8.2.5.3 | éŒ¯èª¤è™•ç†èˆ‡é™ç´šç­–ç•¥ | Backend | 2 | â¬œ | 8.2.5.2 | STT å¤±æ•— â†’ æ–‡å­—è¼¸å…¥ï¼ŒTTS å¤±æ•— â†’ ç´”æ–‡å­—å›æ‡‰ | - |

**Definition of Done (DoD)**:
- [ ] STT æº–ç¢ºç‡ > 90% (ä¸­æ–‡èªéŸ³)
- [ ] RAG æª¢ç´¢å¬å›ç‡ > 80%
- [ ] LLM å›æ‡‰æº–ç¢ºæ€§ > 85% (äººå·¥è©•ä¼°)
- [ ] TTS éŸ³è³ªå¯æ¥å— (ä¸»è§€è©•ä¼°)
- [ ] å®Œæ•´éˆè·¯ç«¯åˆ°ç«¯æ¸¬è©¦é€šé
- [ ] è™•ç†æ™‚é–“ < 15s (P95)

---

### 8.3 LIFF èªéŸ³éŒ„è£½ä»‹é¢ [20h]

**æ¥­å‹™ç›®æ¨™**: åœ¨ LIFF æ‡‰ç”¨ä¸­å¯¦ä½œèªéŸ³éŒ„è£½ã€ä¸Šå‚³ã€å³æ™‚ç‹€æ…‹é¡¯ç¤ºã€éŸ³è¨Šæ’­æ”¾åŠŸèƒ½ï¼Œæä¾›æµæš¢çš„ç”¨æˆ¶é«”é©—ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **éŒ„éŸ³ API**: Web MediaRecorder API
- **éŸ³è¨Šæ ¼å¼**: webm (Chrome) / mp4 (Safari)
- **ä¸Šå‚³**: Multipart/form-data åˆ° `/voice/upload` API

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 8.3.1 | useVoiceRecorder Hook å¯¦ä½œ | Frontend | 6 | â¬œ | - | å°è£ MediaRecorder API |
| 8.3.2 | VoiceInput Component - éŒ„éŸ³ UI | Frontend | 6 | â¬œ | 8.3.1 | æŒ‰éˆ•å¼éŒ„éŸ³ï¼ˆæŒ‰ä½éŒ„éŸ³ï¼Œæ”¾é–‹ä¸Šå‚³ï¼‰ |
| 8.3.3 | éŸ³è¨Šä¸Šå‚³èˆ‡é€²åº¦é¡¯ç¤º | Frontend | 4 | â¬œ | 8.3.2 | é¡¯ç¤ºä¸Šå‚³é€²åº¦æ¢ |
| 8.3.4 | å³æ™‚ç‹€æ…‹æ›´æ–° (WebSocket) | Frontend | 2 | â¬œ | 8.3.3, 8.4 | é¡¯ç¤ºè™•ç†ç‹€æ…‹ï¼ˆè½‰éŒ„ä¸­ã€ç”Ÿæˆä¸­ã€å®Œæˆï¼‰ |
| 8.3.5 | AudioPlayer Component - æ’­æ”¾ TTS éŸ³è¨Š | Frontend | 2 | â¬œ | 8.3.4 | è‡ªå‹•æ’­æ”¾æˆ–æ‰‹å‹•æ’­æ”¾ |

**Definition of Done (DoD)**:
- [ ] æ”¯æ´é•·æŒ‰éŒ„éŸ³ã€æ”¾é–‹ä¸Šå‚³
- [ ] ä¸Šå‚³é€²åº¦å³æ™‚é¡¯ç¤º
- [ ] è™•ç†ç‹€æ…‹å³æ™‚æ›´æ–°ï¼ˆWebSocketï¼‰
- [ ] TTS éŸ³è¨Šè‡ªå‹•æ’­æ”¾
- [ ] éŒ¯èª¤è™•ç†ï¼šéŒ„éŸ³å¤±æ•—ã€ä¸Šå‚³å¤±æ•—ã€è¶…æ™‚

---

### 8.4 WebSocket æ¨é€æ©Ÿåˆ¶ [12h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹ WebSocket æ¨é€æœå‹™ï¼Œæ”¯æ´ AI Worker è™•ç†ç‹€æ…‹å³æ™‚é€šçŸ¥ï¼Œæå‡ç”¨æˆ¶é«”é©—ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **æ¡†æ¶**: FastAPI WebSocket
- **è¨Šæ¯æ ¼å¼**: JSON (`{"status": "processing", "progress": 60, "message": "æ­£åœ¨ç”Ÿæˆå›æ‡‰..."}`)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ | ADR åƒè€ƒ |
|---------|---------|--------|---------|------|----------|----------|---------|
| 8.4.1 | WebSocket Server å¯¦ä½œ | Backend | 4 | â¬œ | - | FastAPI WebSocket endpoint | ADR-017 |
| 8.4.2 | ConnectionManager - é€£ç·šç®¡ç† | Backend | 3 | â¬œ | 8.4.1 | ç®¡ç†å¤šç”¨æˆ¶é€£ç·šï¼Œæ”¯æ´å»£æ’­/å–®æ’­ | - |
| 8.4.3 | AI Worker â†’ WebSocket æ¨é€æ•´åˆ | Backend | 3 | â¬œ | 8.2, 8.4.2 | Worker è™•ç†é€²åº¦æ¨é€åˆ°å‰ç«¯ | - |
| 8.4.4 | å‰ç«¯ WebSocket Client | Frontend | 2 | â¬œ | 8.4.1 | ä½¿ç”¨ `useWebSocket` Hook | - |

**Definition of Done (DoD)**:
- [ ] WebSocket é€£ç·šç©©å®šï¼ˆæ”¯æ´é‡é€£ï¼‰
- [ ] æ¨é€å»¶é² < 500ms
- [ ] æ”¯æ´å¤šç”¨æˆ¶ä¸¦ç™¼é€£ç·š
- [ ] å‰ç«¯å³æ™‚é¡¯ç¤ºè™•ç†é€²åº¦

---

### 8.5 ç‡Ÿé¤Šè©•ä¼° KPI [56h] â­ Sprint 3 å»¶å¾Œè‡³æ­¤

**æ¥­å‹™ç›®æ¨™**: è£œå…… Sprint 3 å»¶å¾Œçš„ç‡Ÿé¤Šè©•ä¼°åŠŸèƒ½ï¼Œæ•´åˆ MNA-SF/MUST é‡è¡¨èˆ‡ InBody æŒ‡æ¨™ï¼Œæ”¯æ´ç‡Ÿé¤Šé¢¨éšªè©•åˆ†èˆ‡è¶¨å‹¢è¿½è¹¤ã€‚

**å‰ç½®æ¢ä»¶**: å®¢æˆ¶éœ€ç¢ºèªä»¥ä¸‹äº‹é …ï¼ˆåƒè€ƒ ADR-010ï¼‰
- [ ] ç‡Ÿé¤Šé‡è¡¨é¸æ“‡: MNA-SF vs MUST vs å…¶ä»–
- [ ] InBody å¿…é ˆæ”¶é›†çš„æŒ‡æ¨™æœ‰å“ªäº›
- [ ] ç‡Ÿé¤Šé¢¨éšªæ¬Šé‡: åœ¨ç¸½é¢¨éšªè©•åˆ†ä¸­å å¤šå°‘æ¯”ä¾‹
- [ ] æ¸¬é‡é »ç‡: æ²»ç™‚å¸«èƒ½ç¢ºä¿ 1-3 æœˆåŸ·è¡Œä¸€æ¬¡å—

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **8.5.1 ç‡Ÿé¤Šæ¸¬é‡ API** | | | **16h** | â¬œ | | |
| 8.5.1.1 | NutritionMeasurement Entity è¨­è¨ˆ | Backend | 4 | â¬œ | 2.2 | InBody æŒ‡æ¨™ï¼šé«”é‡ã€BMIã€é«”è„‚ç‡ã€è‚Œè‚‰é‡ã€éª¨è³ªé‡ |
| 8.5.1.2 | NutritionRepository å¯¦ä½œ | Backend | 4 | â¬œ | 8.5.1.1 | æ”¯æ´è¶¨å‹¢æŸ¥è©¢ |
| 8.5.1.3 | `POST /nutrition-measurements` API | Backend | 4 | â¬œ | 8.5.1.2 | æ²»ç™‚å¸«è¼¸å…¥ InBody æ•¸æ“š |
| 8.5.1.4 | `GET /nutrition-measurements/patient/{id}` API | Backend | 4 | â¬œ | 8.5.1.2 | æŸ¥è©¢æ­·å²æ¸¬é‡è¨˜éŒ„ |
| **8.5.2 ç‡Ÿé¤Šé‡è¡¨ API** | | | **12h** | â¬œ | | |
| 8.5.2.1 | MNA-SF/MUST Scorer å¯¦ä½œ | Backend | 6 | â¬œ | 5.2 | åƒè€ƒ CAT/mMRC Scorer è¨­è¨ˆæ¨¡å¼ |
| 8.5.2.2 | `POST /nutrition-surveys/{type}` API | Backend | 4 | â¬œ | 8.5.2.1 | æ”¯æ´ MNA-SF æˆ– MUST |
| 8.5.2.3 | ç‡Ÿé¤Šé¢¨éšªç­‰ç´šæ˜ å°„ | Backend | 2 | â¬œ | 8.5.2.1 | LOW/MEDIUM/HIGH ç­‰ç´šåˆ¤å®š |
| **8.5.3 Dashboard è¼¸å…¥ä»‹é¢** | | | **12h** | â¬œ | | |
| 8.5.3.1 | NutritionInput Component - InBody æ•¸æ“šè¼¸å…¥ | Frontend | 6 | â¬œ | 8.5.1 | è¡¨å–®é©—è­‰ + æ­·å²è¨˜éŒ„é¡¯ç¤º |
| 8.5.3.2 | NutritionSurveyForm Component - é‡è¡¨å¡«å¯« | Frontend | 4 | â¬œ | 8.5.2 | åƒè€ƒ CAT/mMRC è¡¨å–®è¨­è¨ˆ |
| 8.5.3.3 | NutritionTrend Chart - è¶¨å‹¢åœ–è¡¨ | Frontend | 2 | â¬œ | 8.5.1 | é«”é‡ã€BMIã€è‚Œè‚‰é‡è¶¨å‹¢ |
| **8.5.4 é¢¨éšªè¨ˆç®—æ•´åˆ** | | | **8h** | â¬œ | | |
| 8.5.4.1 | ç‡Ÿé¤Šé¢¨éšªå› å­æ•´åˆåˆ° RiskScore | Backend | 4 | â¬œ | 6.1, 8.5.2 | æ›´æ–°é¢¨éšªè©•åˆ†å…¬å¼ï¼ŒåŠ å…¥ç‡Ÿé¤Šæ¬Šé‡ |
| 8.5.4.2 | ç•°å¸¸è¦å‰‡ï¼šç‡Ÿé¤Šä¸è‰¯è­¦ç¤º | Backend | 2 | â¬œ | 6.2, 8.5.2 | BMI < 18.5 æˆ– MNA-SF ä½åˆ†è§¸ç™¼ä»»å‹™ |
| 8.5.4.3 | Integration Tests | Backend | 2 | â¬œ | 8.5.4.1, 8.5.4.2 | ç«¯åˆ°ç«¯æ¸¬è©¦ï¼šé‡è¡¨ â†’ é¢¨éšª â†’ ä»»å‹™ |
| **8.5.5 LIFF è¶¨å‹¢é¡¯ç¤º** | | | **8h** | â¬œ | | |
| 8.5.5.1 | NutritionHistory Component - ç—…æ‚£ç«¯æ­·å² | Frontend | 4 | â¬œ | 8.5.1 | é¡¯ç¤ºæ­·å²æ¸¬é‡è¨˜éŒ„ |
| 8.5.5.2 | NutritionAdvice Component - ç‡Ÿé¤Šå»ºè­° | Frontend | 4 | â¬œ | 8.5.2 | åŸºæ–¼é‡è¡¨çµæœé¡¯ç¤ºå»ºè­° |

**Definition of Done (DoD)**:
- [ ] å®¢æˆ¶ç¢ºèªç‡Ÿé¤Šé‡è¡¨é¸æ“‡ï¼ˆMNA-SF/MUSTï¼‰
- [ ] InBody æ•¸æ“šå¯æ­£å¸¸è¼¸å…¥èˆ‡æŸ¥è©¢
- [ ] ç‡Ÿé¤Šé‡è¡¨è©•åˆ†é‚è¼¯æ­£ç¢º
- [ ] ç‡Ÿé¤Šé¢¨éšªæ•´åˆåˆ°ç¸½é¢¨éšªè©•åˆ†
- [ ] Dashboard èˆ‡ LIFF ä»‹é¢å®Œæˆ
- [ ] ç•°å¸¸è¦å‰‡æ¸¬è©¦é€šéï¼ˆç‡Ÿé¤Šä¸è‰¯è­¦ç¤ºï¼‰

---

## Sprint 7: é€šçŸ¥ç³»çµ± & æ’ç¨‹ [72h]

**Sprint ç›®æ¨™**: å»ºç«‹é€šçŸ¥ç³»çµ±ï¼ˆæ¨æ’­é€šçŸ¥ã€ç°¡è¨Šã€Emailï¼‰ã€æ’ç¨‹æœå‹™ï¼ˆå®šæ™‚ä»»å‹™ã€é€±å ±ç”Ÿæˆï¼‰ã€é€šçŸ¥æ­·å²ç®¡ç†ã€‚

**æ™‚ç¨‹**: Week 13-14 (2 weeks)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… APScheduler æ’ç¨‹æœå‹™
- âœ… é€šçŸ¥æœå‹™èˆ‡æé†’è¦å‰‡
- âœ… é€±å ±è‡ªå‹•ç”Ÿæˆ
- âœ… Dashboard é€šçŸ¥æ­·å²

---

### 9.1 APScheduler æ’ç¨‹æœå‹™ [16h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹ Python æ’ç¨‹æœå‹™ï¼Œæ”¯æ´å®šæ™‚ä»»å‹™ï¼ˆæ—¥èªŒæé†’ã€å•å·æé†’ã€é€±å ±ç”Ÿæˆï¼‰ã€Cron è¡¨é”å¼ã€å¤±æ•—é‡è©¦ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **æ¡†æ¶**: APScheduler (Advanced Python Scheduler)
- **å„²å­˜**: PostgreSQL (JobStore)
- **è§¸ç™¼å™¨**: Cron Trigger (éˆæ´»é…ç½®æ™‚é–“)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 9.1.1 | APScheduler åˆå§‹åŒ–èˆ‡é…ç½® | Backend | 4 | â¬œ | - | é…ç½® JobStore (PostgreSQL) |
| 9.1.2 | JobManager Service - ä»»å‹™ç®¡ç† | Backend | 4 | â¬œ | 9.1.1 | æ”¯æ´æ–°å¢ã€åˆªé™¤ã€æš«åœã€æ¢å¾©ä»»å‹™ |
| 9.1.3 | CronJob æ¨¡æ¿è¨­è¨ˆ | Backend | 4 | â¬œ | 9.1.2 | é è¨­æ¨¡æ¿ï¼šæ¯æ—¥ 20:00 æ—¥èªŒæé†’ã€æ¯é€±ä¸€ 9:00 é€±å ± |
| 9.1.4 | å¤±æ•—é‡è©¦èˆ‡æ—¥èªŒè¨˜éŒ„ | Backend | 4 | â¬œ | 9.1.3 | å¤±æ•—è‡ªå‹•é‡è©¦ 3 æ¬¡ï¼Œè¨˜éŒ„åŸ·è¡Œæ—¥èªŒ |

**Definition of Done (DoD)**:
- [ ] APScheduler æ­£å¸¸é‹è¡Œ
- [ ] æ”¯æ´ Cron è¡¨é”å¼é…ç½®
- [ ] ä»»å‹™åŸ·è¡Œæ­·å²å¯æŸ¥è©¢
- [ ] å¤±æ•—é‡è©¦æ©Ÿåˆ¶æ¸¬è©¦é€šé

---

### 9.2 é€šçŸ¥æœå‹™èˆ‡æé†’è¦å‰‡ [32h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹å¤šé€šé“é€šçŸ¥æœå‹™ï¼ˆLINE æ¨æ’­ã€ç°¡è¨Šã€Emailï¼‰ï¼Œæ•´åˆæé†’è¦å‰‡ï¼ˆæ—¥èªŒæé†’ã€å•å·æé†’ã€ä»»å‹™æé†’ï¼‰ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **LINE æ¨æ’­**: LINE Messaging API
- **ç°¡è¨Š**: Twilio API (å¯é¸)
- **Email**: SendGrid API

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **9.2.1 é€šçŸ¥æœå‹™æ¶æ§‹** | | | **12h** | â¬œ | | |
| 9.2.1.1 | Notification Entity è¨­è¨ˆ | Backend | 2 | â¬œ | - | åŒ…å«ï¼šé€šé“ã€æ”¶ä»¶äººã€å…§å®¹ã€ç‹€æ…‹ |
| 9.2.1.2 | NotificationRepository å¯¦ä½œ | Backend | 3 | â¬œ | 9.2.1.1 | æ”¯æ´æ­·å²æŸ¥è©¢ |
| 9.2.1.3 | NotificationService - çµ±ä¸€ä»‹é¢ | Backend | 4 | â¬œ | 9.2.1.2 | æ”¯æ´å¤šé€šé“ç™¼é€ (LINE/SMS/Email) |
| 9.2.1.4 | LINE æ¨æ’­æ•´åˆ | Backend | 3 | â¬œ | 9.2.1.3 | LINE Messaging API å°è£ |
| **9.2.2 æé†’è¦å‰‡** | | | **12h** | â¬œ | | |
| 9.2.2.1 | æ—¥èªŒæé†’è¦å‰‡ | Backend | 4 | â¬œ | 9.1, 9.2.1 | æ¯æ—¥ 20:00 æé†’æœªå¡«æ—¥èªŒç—…æ‚£ |
| 9.2.2.2 | å•å·æé†’è¦å‰‡ | Backend | 4 | â¬œ | 9.1, 9.2.1 | CAT: æ¯æœˆ 1 æ—¥æé†’, mMRC: æ¯ 3 æœˆæé†’ |
| 9.2.2.3 | ä»»å‹™æé†’è¦å‰‡ | Backend | 4 | â¬œ | 9.1, 9.2.1, 6.3 | é«˜å„ªå…ˆç´šä»»å‹™æœªå®Œæˆæé†’æ²»ç™‚å¸« |
| **9.2.3 æ¸¬è©¦èˆ‡å„ªåŒ–** | | | **8h** | â¬œ | | |
| 9.2.3.1 | é€šçŸ¥ç™¼é€æ¸¬è©¦ | Backend | 4 | â¬œ | 9.2.1, 9.2.2 | æ¸¬è©¦æ‰€æœ‰é€šé“æ­£å¸¸ç™¼é€ |
| 9.2.3.2 | ç™¼é€é€Ÿç‡é™åˆ¶ | Backend | 2 | â¬œ | 9.2.1 | é¿å… LINE API é™é€Ÿ (500 req/min) |
| 9.2.3.3 | å¤±æ•—é‡è©¦èˆ‡é™ç´š | Backend | 2 | â¬œ | 9.2.1 | LINE å¤±æ•— â†’ Email é™ç´š |

**Definition of Done (DoD)**:
- [ ] LINE æ¨æ’­æ­£å¸¸ç™¼é€
- [ ] æ—¥èªŒæé†’ã€å•å·æé†’æ¸¬è©¦é€šé
- [ ] é€šçŸ¥æ­·å²å¯æŸ¥è©¢
- [ ] ç™¼é€é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆ
- [ ] å¤±æ•—é™ç´šæ©Ÿåˆ¶æ¸¬è©¦é€šé

---

### 9.3 é€±å ±è‡ªå‹•ç”Ÿæˆ [16h]

**æ¥­å‹™ç›®æ¨™**: è‡ªå‹•ç”Ÿæˆç—…æ‚£æ¯é€±å¥åº·å ±å‘Šï¼ˆæ—¥èªŒçµ±è¨ˆã€å•å·è¶¨å‹¢ã€é¢¨éšªè©•ä¼°ï¼‰ï¼Œç™¼é€çµ¦ç—…æ‚£èˆ‡æ²»ç™‚å¸«ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **å ±å‘Šæ ¼å¼**: PDF (ä½¿ç”¨ `reportlab` æˆ– `WeasyPrint`)
- **æ•¸æ“šä¾†æº**: DailyLog, Survey, RiskScore
- **ç™¼é€æ–¹å¼**: LINE æ¨æ’­ + Email

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 9.3.1 | WeeklyReportGenerator Service | Backend | 6 | â¬œ | 4.2, 5.2, 6.1 | æ•´åˆ 7 å¤©æ•¸æ“šç”Ÿæˆå ±å‘Š |
| 9.3.2 | PDF å ±å‘Šæ¨¡æ¿è¨­è¨ˆ | Backend | 4 | â¬œ | 9.3.1 | åŒ…å«ï¼šæ—¥èªŒçµ±è¨ˆã€å•å·è¶¨å‹¢ã€é¢¨éšªè©•ä¼° |
| 9.3.3 | æ’ç¨‹ä»»å‹™ï¼šæ¯é€±ä¸€ 9:00 ç”Ÿæˆ | Backend | 2 | â¬œ | 9.1, 9.3.2 | APScheduler Cron Job |
| 9.3.4 | å ±å‘Šç™¼é€æ•´åˆ | Backend | 4 | â¬œ | 9.2, 9.3.3 | LINE + Email ç™¼é€å ±å‘Šé€£çµ |

**Definition of Done (DoD)**:
- [ ] é€±å ±åŒ…å«å®Œæ•´æ•¸æ“šï¼ˆæ—¥èªŒã€å•å·ã€é¢¨éšªï¼‰
- [ ] PDF æ ¼å¼å‹å–„ï¼ˆæ˜“è®€ã€ç¾è§€ï¼‰
- [ ] æ¯é€±ä¸€è‡ªå‹•ç”Ÿæˆä¸¦ç™¼é€
- [ ] æ¸¬è©¦ï¼šç—…æ‚£èˆ‡æ²»ç™‚å¸«éƒ½èƒ½æ”¶åˆ°

---

### 9.4 Dashboard é€šçŸ¥æ­·å² [8h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹æ²»ç™‚å¸«é€šçŸ¥æ­·å²æŸ¥è©¢ä»‹é¢ï¼Œæ”¯æ´éæ¿¾ã€æœå°‹ã€é‡æ–°ç™¼é€ã€‚

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 9.4.1 | NotificationHistory Component | Frontend | 4 | â¬œ | 9.2 | é¡¯ç¤ºé€šçŸ¥åˆ—è¡¨ï¼ˆé€šé“ã€ç‹€æ…‹ã€æ™‚é–“ï¼‰ |
| 9.4.2 | éæ¿¾èˆ‡æœå°‹åŠŸèƒ½ | Frontend | 2 | â¬œ | 9.4.1 | æŒ‰é€šé“ã€ç‹€æ…‹ã€ç—…æ‚£éæ¿¾ |
| 9.4.3 | é‡æ–°ç™¼é€åŠŸèƒ½ | Frontend | 2 | â¬œ | 9.4.1 | å¤±æ•—é€šçŸ¥å¯é‡æ–°ç™¼é€ |

**Definition of Done (DoD)**:
- [ ] é€šçŸ¥æ­·å²å¯æŸ¥è©¢
- [ ] æ”¯æ´æŒ‰é€šé“ã€ç‹€æ…‹éæ¿¾
- [ ] å¤±æ•—é€šçŸ¥å¯é‡æ–°ç™¼é€

---

## Sprint 8: å„ªåŒ– & ä¸Šç·šæº–å‚™ [96h]

**Sprint ç›®æ¨™**: æ•ˆèƒ½å„ªåŒ–ã€ç›£æ§å‘Šè­¦é…ç½®ã€å®‰å…¨ç¨½æ ¸ã€æ–‡æª”å®Œå–„ã€ç”Ÿç”¢éƒ¨ç½²æº–å‚™ï¼Œç¢ºä¿ MVP ç©©å®šä¸Šç·šã€‚

**æ™‚ç¨‹**: Week 15-16 (2 weeks)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… æ•ˆèƒ½å„ªåŒ–ï¼ˆAPIã€è³‡æ–™åº«ã€å¿«å–ï¼‰
- âœ… ç›£æ§èˆ‡å‘Šè­¦ï¼ˆPrometheus + Grafanaï¼‰
- âœ… å®‰å…¨ç¨½æ ¸ï¼ˆOWASP Top 10ï¼‰
- âœ… æ–‡æª”å®Œå–„ï¼ˆAPI æ–‡æª”ã€éƒ¨ç½²æ–‡æª”ã€ç”¨æˆ¶æ‰‹å†Šï¼‰
- âœ… ç”Ÿç”¢éƒ¨ç½²ï¼ˆZeabur/AWSï¼‰

---

### 10.1 æ•ˆèƒ½å„ªåŒ– [24h]

**æ¥­å‹™ç›®æ¨™**: é‡å° APIã€è³‡æ–™åº«ã€å¿«å–ã€å‰ç«¯é€²è¡Œå…¨é¢æ•ˆèƒ½å„ªåŒ–ï¼Œç¢ºä¿é”åˆ° SLA ç›®æ¨™ã€‚

**æ•ˆèƒ½ç›®æ¨™**:
- API P95 å»¶é² < 200ms
- è³‡æ–™åº«æŸ¥è©¢ P95 < 50ms
- é¦–é è¼‰å…¥æ™‚é–“ < 2s

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| **10.1.1 API æ•ˆèƒ½å„ªåŒ–** | | | **8h** | â¬œ | | |
| 10.1.1.1 | API æ•ˆèƒ½æ¸¬è©¦åŸºæº–å»ºç«‹ | Backend | 2 | â¬œ | - | ä½¿ç”¨ Locust å£“æ¸¬æ‰€æœ‰ç«¯é» |
| 10.1.1.2 | N+1 æŸ¥è©¢å„ªåŒ– | Backend | 3 | â¬œ | 10.1.1.1 | SQLAlchemy `joinedload` å„ªåŒ– |
| 10.1.1.3 | éŸ¿æ‡‰å£“ç¸® (gzip) | Backend | 1 | â¬œ | - | FastAPI middleware é…ç½® |
| 10.1.1.4 | åˆ†é å„ªåŒ– (Cursor-based) | Backend | 2 | â¬œ | 10.1.1.2 | æ›¿æ› Offset-based åˆ†é  |
| **10.1.2 è³‡æ–™åº«å„ªåŒ–** | | | **8h** | â¬œ | | |
| 10.1.2.1 | æ…¢æŸ¥è©¢åˆ†æ | Backend | 2 | â¬œ | - | `pg_stat_statements` åˆ†æ |
| 10.1.2.2 | ç´¢å¼•å„ªåŒ– | Backend | 4 | â¬œ | 10.1.2.1 | æ–°å¢è¤‡åˆç´¢å¼•ï¼Œç§»é™¤ç„¡ç”¨ç´¢å¼• |
| 10.1.2.3 | é€£ç·šæ± èª¿å„ª | DevOps | 2 | â¬œ | - | èª¿æ•´ `pool_size`, `max_overflow` |
| **10.1.3 å¿«å–ç­–ç•¥** | | | **4h** | â¬œ | | |
| 10.1.3.1 | Redis å¿«å–ç†±é»æ•¸æ“š | Backend | 2 | â¬œ | 3.1.3 | å¿«å–ï¼šç—…æ‚£åˆ—è¡¨ã€å•å·æœ€æ–°çµæœ |
| 10.1.3.2 | Cache-Aside æ¨¡å¼å¯¦ä½œ | Backend | 2 | â¬œ | 10.1.3.1 | è‡ªå‹•å¿«å–æ›´æ–°/å¤±æ•ˆ |
| **10.1.4 å‰ç«¯å„ªåŒ–** | | | **4h** | â¬œ | | |
| 10.1.4.1 | ç¨‹å¼ç¢¼åˆ†å‰² (Code Splitting) | Frontend | 2 | â¬œ | - | Next.js Dynamic Import |
| 10.1.4.2 | åœ–ç‰‡æ‡¶è¼‰å…¥èˆ‡å„ªåŒ– | Frontend | 2 | â¬œ | - | Next.js Image Component |

**Definition of Done (DoD)**:
- [ ] API P95 å»¶é² < 200ms
- [ ] è³‡æ–™åº«æŸ¥è©¢ P95 < 50ms
- [ ] é¦–é è¼‰å…¥æ™‚é–“ < 2s
- [ ] Lighthouse æ€§èƒ½åˆ†æ•¸ > 80

---

### 10.2 ç›£æ§èˆ‡å‘Šè­¦ [20h]

**æ¥­å‹™ç›®æ¨™**: é…ç½® Prometheus + Grafana ç›£æ§ç³»çµ±ï¼Œè¨­å®šå‘Šè­¦è¦å‰‡ï¼Œç¢ºä¿ç”Ÿç”¢ç’°å¢ƒå¯è§€æ¸¬æ€§ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **ç›£æ§**: Prometheus (æŒ‡æ¨™æ”¶é›†)
- **è¦–è¦ºåŒ–**: Grafana (å„€è¡¨æ¿)
- **å‘Šè­¦**: AlertManager (å‘Šè­¦é€šçŸ¥)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 10.2.1 | Prometheus éƒ¨ç½²èˆ‡é…ç½® | DevOps | 4 | â¬œ | - | Docker Compose é…ç½® |
| 10.2.2 | FastAPI Metrics æš´éœ² | Backend | 3 | â¬œ | 10.2.1 | `prometheus_fastapi_instrumentator` |
| 10.2.3 | Grafana Dashboard è¨­è¨ˆ | DevOps | 6 | â¬œ | 10.2.2 | å„€è¡¨æ¿ï¼šAPI å»¶é²ã€QPSã€éŒ¯èª¤ç‡ |
| 10.2.4 | AlertManager å‘Šè­¦è¦å‰‡ | DevOps | 4 | â¬œ | 10.2.3 | è¦å‰‡ï¼šAPI éŒ¯èª¤ç‡ > 5%, DB é€£ç·š > 80% |
| 10.2.5 | å‘Šè­¦é€šçŸ¥æ•´åˆ (Slack/Email) | DevOps | 3 | â¬œ | 10.2.4 | Slack Webhook æ•´åˆ |

**Definition of Done (DoD)**:
- [ ] Grafana å„€è¡¨æ¿æ­£å¸¸é¡¯ç¤º
- [ ] å‘Šè­¦è¦å‰‡æ¸¬è©¦é€šé
- [ ] å‘Šè­¦é€šçŸ¥é€é” Slack/Email

---

### 10.3 å®‰å…¨ç¨½æ ¸ [16h]

**æ¥­å‹™ç›®æ¨™**: åŸ·è¡Œ OWASP Top 10 å®‰å…¨æª¢æŸ¥ï¼Œä¿®å¾©æ¼æ´ï¼Œç¢ºä¿ç”Ÿç”¢ç’°å¢ƒå®‰å…¨æ€§ã€‚

**æª¢æŸ¥æ¸…å–®**:
- SQL Injection
- XSS (Cross-Site Scripting)
- CSRF (Cross-Site Request Forgery)
- Authentication & Session Management
- Sensitive Data Exposure

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 10.3.1 | OWASP ZAP è‡ªå‹•æƒæ | Security | 4 | â¬œ | - | ä½¿ç”¨ OWASP ZAP å·¥å…·æƒæ |
| 10.3.2 | SQL Injection é˜²è­·é©—è­‰ | Backend | 2 | â¬œ | 10.3.1 | ç¢ºèªæ‰€æœ‰æŸ¥è©¢ä½¿ç”¨åƒæ•¸åŒ– |
| 10.3.3 | XSS é˜²è­· (Content Security Policy) | Frontend | 3 | â¬œ | 10.3.1 | é…ç½® CSP Header |
| 10.3.4 | æ•æ„Ÿè³‡æ–™åŠ å¯†æª¢æŸ¥ | Backend | 3 | â¬œ | 10.3.1 | ç¢ºèªå¯†ç¢¼ bcrypt, JWT secret å®‰å…¨ |
| 10.3.5 | HTTPS å¼·åˆ¶èˆ‡ HSTS | DevOps | 2 | â¬œ | - | Nginx é…ç½® HTTPS + HSTS Header |
| 10.3.6 | ä¾è³´å¥—ä»¶æ¼æ´æƒæ | DevOps | 2 | â¬œ | - | `npm audit`, `pip-audit` |

**Definition of Done (DoD)**:
- [ ] OWASP ZAP æƒæç„¡é«˜å±æ¼æ´
- [ ] SQL Injection æ¸¬è©¦é€šé
- [ ] XSS é˜²è­·æ¸¬è©¦é€šé
- [ ] æ‰€æœ‰æ•æ„Ÿè³‡æ–™åŠ å¯†
- [ ] HTTPS å¼·åˆ¶ç”Ÿæ•ˆ

---

### 10.4 æ–‡æª”å®Œå–„ [16h]

**æ¥­å‹™ç›®æ¨™**: å®Œå–„ API æ–‡æª”ã€éƒ¨ç½²æ–‡æª”ã€ç”¨æˆ¶æ‰‹å†Šï¼Œç¢ºä¿åœ˜éšŠèˆ‡ç”¨æˆ¶å¯é †åˆ©ä½¿ç”¨ç³»çµ±ã€‚

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æ–‡æª”é¡å‹ |
|---------|---------|--------|---------|------|----------|----------|
| 10.4.1 | OpenAPI æ–‡æª”å®Œå–„ | Backend | 4 | â¬œ | - | Swagger UI è‡ªå‹•ç”Ÿæˆ |
| 10.4.2 | éƒ¨ç½²æ–‡æª”æ’°å¯« | DevOps | 4 | â¬œ | - | Zeabur/AWS éƒ¨ç½²æ­¥é©Ÿ |
| 10.4.3 | æ²»ç™‚å¸«ç”¨æˆ¶æ‰‹å†Š | PM | 4 | â¬œ | - | Dashboard æ“ä½œæŒ‡å— |
| 10.4.4 | ç—…æ‚£ç”¨æˆ¶æ‰‹å†Š | PM | 4 | â¬œ | - | LIFF ä½¿ç”¨æ•™å­¸ |

**Definition of Done (DoD)**:
- [ ] OpenAPI æ–‡æª”æ¶µè“‹æ‰€æœ‰ API
- [ ] éƒ¨ç½²æ–‡æª”å¯æˆåŠŸåŸ·è¡Œéƒ¨ç½²
- [ ] ç”¨æˆ¶æ‰‹å†ŠåŒ…å«æˆªåœ–èˆ‡æ­¥é©Ÿ

---

### 10.5 ç”Ÿç”¢éƒ¨ç½² [20h]

**æ¥­å‹™ç›®æ¨™**: åŸ·è¡Œç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²ï¼Œé…ç½®åŸŸåã€SSLã€ç’°å¢ƒè®Šæ•¸ï¼Œç¢ºä¿ç³»çµ±ç©©å®šé‹è¡Œã€‚

**éƒ¨ç½²å¹³å°**: Zeabur (æ¨è–¦) æˆ– AWS ECS

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 10.5.1 | Zeabur å°ˆæ¡ˆåˆå§‹åŒ– | DevOps | 2 | â¬œ | - | å‰µå»º Zeabur å°ˆæ¡ˆèˆ‡æœå‹™ |
| 10.5.2 | ç’°å¢ƒè®Šæ•¸é…ç½® | DevOps | 2 | â¬œ | 10.5.1 | é…ç½®ç”Ÿç”¢ç’°å¢ƒè®Šæ•¸ |
| 10.5.3 | PostgreSQL ç”Ÿç”¢è³‡æ–™åº« | DevOps | 3 | â¬œ | 10.5.2 | Zeabur PostgreSQL æœå‹™ |
| 10.5.4 | Redis ç”Ÿç”¢å¿«å– | DevOps | 2 | â¬œ | 10.5.3 | Zeabur Redis æœå‹™ |
| 10.5.5 | åŸŸåèˆ‡ SSL é…ç½® | DevOps | 3 | â¬œ | 10.5.4 | è‡ªè¨‚åŸŸå + Let's Encrypt SSL |
| 10.5.6 | CI/CD Pipeline é…ç½® | DevOps | 4 | â¬œ | 10.5.5 | GitHub Actions è‡ªå‹•éƒ¨ç½² |
| 10.5.7 | è—ç¶ éƒ¨ç½²æ¸¬è©¦ | DevOps | 2 | â¬œ | 10.5.6 | é©—è­‰é›¶åœæ©Ÿéƒ¨ç½² |
| 10.5.8 | ç”Ÿç”¢ç’°å¢ƒç…™éœ§æ¸¬è©¦ | QA | 2 | â¬œ | 10.5.7 | æ ¸å¿ƒåŠŸèƒ½ç«¯åˆ°ç«¯æ¸¬è©¦ |

**Definition of Done (DoD)**:
- [ ] ç”Ÿç”¢ç’°å¢ƒå¯æ­£å¸¸è¨ªå•
- [ ] HTTPS æ­£å¸¸ç”Ÿæ•ˆ
- [ ] CI/CD è‡ªå‹•éƒ¨ç½²æˆåŠŸ
- [ ] ç…™éœ§æ¸¬è©¦å…¨éƒ¨é€šé

---

## Sprint 11: æ¸¬è©¦èˆ‡å“è³ªä¿è­‰ [80h] (æŒçºŒæ€§ä»»å‹™)

**Sprint ç›®æ¨™**: å»ºç«‹å®Œæ•´çš„æ¸¬è©¦é«”ç³»ï¼ˆå–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ã€ç«¯åˆ°ç«¯æ¸¬è©¦ï¼‰ï¼Œç¢ºä¿ä»£ç¢¼å“è³ªèˆ‡ç³»çµ±ç©©å®šæ€§ã€‚

**æ™‚ç¨‹**: è·¨æ‰€æœ‰ Sprints (æŒçºŒåŸ·è¡Œ)

**é—œéµäº¤ä»˜ç‰©**:
- âœ… å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%
- âœ… æ•´åˆæ¸¬è©¦æ¶µè“‹æ ¸å¿ƒæ¥­å‹™æµç¨‹
- âœ… ç«¯åˆ°ç«¯æ¸¬è©¦ (Playwright)
- âœ… CI/CD æ•´åˆè‡ªå‹•åŒ–æ¸¬è©¦

---

### 11.1 å–®å…ƒæ¸¬è©¦ [32h]

**æ¥­å‹™ç›®æ¨™**: å»ºç«‹ Backend èˆ‡ Frontend å–®å…ƒæ¸¬è©¦ï¼Œç¢ºä¿æ¯å€‹å‡½æ•¸/çµ„ä»¶æ­£ç¢ºé‹ä½œã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **Backend**: Pytest + Coverage
- **Frontend**: Jest + React Testing Library

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | ç›®æ¨™è¦†è“‹ç‡ |
|---------|---------|--------|---------|------|----------|------------|
| **11.1.1 Backend å–®å…ƒæ¸¬è©¦** | | | **20h** | â¬œ | | |
| 11.1.1.1 | Domain Model æ¸¬è©¦ | Backend | 6 | â¬œ | Sprint 1-8 | > 90% |
| 11.1.1.2 | Service å±¤æ¸¬è©¦ | Backend | 8 | â¬œ | Sprint 1-8 | > 85% |
| 11.1.1.3 | Utility å‡½æ•¸æ¸¬è©¦ | Backend | 4 | â¬œ | Sprint 1-8 | > 95% |
| 11.1.1.4 | Mock èˆ‡ Fixture è¨­è¨ˆ | Backend | 2 | â¬œ | 11.1.1.1-11.1.1.3 | - |
| **11.1.2 Frontend å–®å…ƒæ¸¬è©¦** | | | **12h** | â¬œ | | |
| 11.1.2.1 | Component æ¸¬è©¦ | Frontend | 6 | â¬œ | Sprint 1-8 | > 80% |
| 11.1.2.2 | Hook æ¸¬è©¦ | Frontend | 4 | â¬œ | Sprint 1-8 | > 85% |
| 11.1.2.3 | Utility å‡½æ•¸æ¸¬è©¦ | Frontend | 2 | â¬œ | Sprint 1-8 | > 95% |

**Definition of Done (DoD)**:
- [ ] Backend å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] Frontend å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] æ‰€æœ‰æ¸¬è©¦åœ¨ CI ä¸­è‡ªå‹•åŸ·è¡Œ

---

### 11.2 æ•´åˆæ¸¬è©¦ [24h]

**æ¥­å‹™ç›®æ¨™**: æ¸¬è©¦ APIã€è³‡æ–™åº«ã€ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆï¼Œç¢ºä¿æ¨¡çµ„é–“å”ä½œæ­£å¸¸ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **Framework**: Pytest + TestClient (FastAPI)
- **è³‡æ–™åº«**: SQLite (æ¸¬è©¦) æˆ– PostgreSQL (Docker)

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æ¸¬è©¦ç¯„åœ |
|---------|---------|--------|---------|------|----------|----------|
| 11.2.1 | API æ•´åˆæ¸¬è©¦ | Backend | 12 | â¬œ | Sprint 1-8 | æ¶µè“‹æ‰€æœ‰æ ¸å¿ƒ API endpoints |
| 11.2.2 | è³‡æ–™åº«æ•´åˆæ¸¬è©¦ | Backend | 6 | â¬œ | Sprint 1-8 | æ¸¬è©¦ CRUD + è¤‡é›œæŸ¥è©¢ |
| 11.2.3 | ç¬¬ä¸‰æ–¹æœå‹™ Mock æ¸¬è©¦ | Backend | 6 | â¬œ | Sprint 5-8 | OpenAI API, LINE API Mock |

**Definition of Done (DoD)**:
- [ ] æ‰€æœ‰æ ¸å¿ƒ API æœ‰æ•´åˆæ¸¬è©¦
- [ ] è³‡æ–™åº«äº¤æ˜“æ¸¬è©¦é€šé
- [ ] ç¬¬ä¸‰æ–¹æœå‹™ Mock è¦†è“‹ç‡ > 70%

---

### 11.3 ç«¯åˆ°ç«¯æ¸¬è©¦ (E2E) [16h]

**æ¥­å‹™ç›®æ¨™**: æ¨¡æ“¬çœŸå¯¦ç”¨æˆ¶æ“ä½œï¼Œæ¸¬è©¦å®Œæ•´æ¥­å‹™æµç¨‹ï¼Œç¢ºä¿ç³»çµ±ç«¯åˆ°ç«¯å¯ç”¨ã€‚

**æŠ€è¡“æ–¹æ¡ˆ**:
- **Framework**: Playwright
- **æ¸¬è©¦å ´æ™¯**: æ²»ç™‚å¸«å·¥ä½œæµã€ç—…æ‚£å¡«å¯«æµç¨‹

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æ¸¬è©¦å ´æ™¯ |
|---------|---------|--------|---------|------|----------|----------|
| 11.3.1 | æ²»ç™‚å¸« E2E æ¸¬è©¦ | QA | 8 | â¬œ | Sprint 1-8 | ç™»å…¥ â†’ æŸ¥çœ‹ç—…æ‚£ â†’ å‰µå»ºä»»å‹™ â†’ ç™¼é€é€šçŸ¥ |
| 11.3.2 | ç—…æ‚£ E2E æ¸¬è©¦ | QA | 8 | â¬œ | Sprint 1-8 | LIFF ç™»å…¥ â†’ å¡«å¯«æ—¥èªŒ â†’ å¡«å¯«å•å· â†’ èªéŸ³æå• |

**Definition of Done (DoD)**:
- [ ] æ²»ç™‚å¸«æ ¸å¿ƒå·¥ä½œæµæ¸¬è©¦é€šé
- [ ] ç—…æ‚£æ ¸å¿ƒå¡«å¯«æµç¨‹æ¸¬è©¦é€šé
- [ ] E2E æ¸¬è©¦åœ¨ CI ä¸­åŸ·è¡Œ

---

### 11.4 CI/CD æ•´åˆ [8h]

**æ¥­å‹™ç›®æ¨™**: å°‡æ‰€æœ‰æ¸¬è©¦æ•´åˆåˆ° CI/CD Pipelineï¼Œç¢ºä¿æ¯æ¬¡æäº¤éƒ½è‡ªå‹•åŸ·è¡Œæ¸¬è©¦ã€‚

#### è©³ç´°ä»»å‹™åˆ†è§£

| ä»»å‹™ç·¨è™Ÿ | ä»»å‹™åç¨± | è² è²¬äºº | å·¥æ™‚(h) | ç‹€æ…‹ | ä¾è³´é—œä¿‚ | æŠ€è¡“èªªæ˜ |
|---------|---------|--------|---------|------|----------|----------|
| 11.4.1 | GitHub Actions æ¸¬è©¦ Pipeline | DevOps | 4 | â¬œ | 11.1-11.3 | åŸ·è¡Œï¼šå–®å…ƒæ¸¬è©¦ + æ•´åˆæ¸¬è©¦ |
| 11.4.2 | æ¸¬è©¦å ±å‘Šç”Ÿæˆ | DevOps | 2 | â¬œ | 11.4.1 | Coverage Report + HTML å ±å‘Š |
| 11.4.3 | PR æ¸¬è©¦é–€æª»è¨­å®š | DevOps | 2 | â¬œ | 11.4.2 | è¦†è“‹ç‡ < 80% ç¦æ­¢åˆä½µ |

**Definition of Done (DoD)**:
- [ ] CI è‡ªå‹•åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
- [ ] æ¸¬è©¦å¤±æ•—ç¦æ­¢åˆä½µ PR
- [ ] æ¸¬è©¦å ±å‘Šè‡ªå‹•ç”Ÿæˆ

---

## è·¨ Sprint ä¾è³´é—œä¿‚åœ–

```mermaid
graph TD
  Sprint3[Sprint 3: å„€è¡¨æ¿ & å•å·] --> Sprint4[Sprint 4: é¢¨éšªå¼•æ“]
  Sprint4 --> Sprint5[Sprint 5: RAG ç³»çµ±]
  Sprint5 --> Sprint6[Sprint 6: AI èªéŸ³è™•ç†]
  Sprint6 --> Sprint7[Sprint 7: é€šçŸ¥ç³»çµ±]
  Sprint7 --> Sprint8[Sprint 8: å„ªåŒ– & ä¸Šç·š]

  Sprint4 -.è£œå…….-> Sprint6_Nutrition[Sprint 6: ç‡Ÿé¤Šè©•ä¼°]
  Sprint6_Nutrition --> Sprint4

  Sprint11[Sprint 11: æ¸¬è©¦å“ä¿] -.æŒçºŒ.-> Sprint3
  Sprint11 -.æŒçºŒ.-> Sprint4
  Sprint11 -.æŒçºŒ.-> Sprint5
  Sprint11 -.æŒçºŒ.-> Sprint6
  Sprint11 -.æŒçºŒ.-> Sprint7
  Sprint11 -.æŒçºŒ.-> Sprint8
```

**é—œéµä¾è³´**:
- Sprint 4 ä¾è³´ Sprint 3 çš„å•å· API (CAT/mMRC)
- Sprint 5 éœ€è¦ Sprint 4 çš„é¢¨éšªåˆ†æ•¸æ•¸æ“š
- Sprint 6 ä¾è³´ Sprint 5 çš„ RAG ç³»çµ±
- Sprint 6 ç‡Ÿé¤Šè©•ä¼°æ•´åˆåˆ° Sprint 4 é¢¨éšªå¼•æ“
- Sprint 7 ä¾è³´æ‰€æœ‰å‰ç½®åŠŸèƒ½ï¼ˆé¢¨éšªã€AIã€ç‡Ÿé¤Šï¼‰
- Sprint 11 æŒçºŒç‚ºæ‰€æœ‰ Sprint æä¾›æ¸¬è©¦æ”¯æŒ

---

## æŠ€è¡“æ£§ç¸½è¦½

| å±¤ç´š | æŠ€è¡“é¸å‹ | Sprint å¼•å…¥ | ç”¨é€” |
|------|---------|-------------|------|
| **Backend Framework** | FastAPI | Sprint 1 | REST API æœå‹™ |
| **Database** | PostgreSQL 15 + pgvector | Sprint 1, 5 | é—œè¯å¼è³‡æ–™åº« + å‘é‡æª¢ç´¢ |
| **Cache** | Redis | Sprint 1 | å¿«å–ã€Sessionã€Token Blacklist |
| **Message Queue** | RabbitMQ | Sprint 6 | AI ä»»å‹™ä½‡åˆ— |
| **Scheduler** | APScheduler | Sprint 7 | å®šæ™‚ä»»å‹™ |
| **Frontend Dashboard** | Next.js 14 + TypeScript | Sprint 1 | æ²»ç™‚å¸«ç®¡ç†ä»‹é¢ |
| **Frontend LIFF** | Vite + React + TypeScript | Sprint 1 | ç—…æ‚£ LINE ä»‹é¢ |
| **AI Services** | OpenAI API (Whisper/GPT-4/TTS) | Sprint 6 | èªéŸ³è™•ç†éˆ |
| **Embedding** | OpenAI text-embedding-3-small | Sprint 5 | æ–‡æœ¬å‘é‡åŒ– |
| **Monitoring** | Prometheus + Grafana | Sprint 8 | ç›£æ§èˆ‡å‘Šè­¦ |
| **Deployment** | Zeabur / AWS ECS | Sprint 8 | ç”Ÿç”¢éƒ¨ç½² |

---

## ç‰ˆæœ¬è¨˜éŒ„ (Version History)

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´æ‘˜è¦ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2025-10-23 | åˆå§‹ç‰ˆæœ¬ - Sprint 4-8 è©³ç´°è¦åŠƒ | TaskMaster Hub |

---

## é—œè¯æ–‡ä»¶ (Related Documents)

- **çˆ¶æ–‡ä»¶**: [16_wbs_development_plan.md](./16_wbs_development_plan.md)
- **ADR æ¸…å–®**:
  - [ADR-012] é¢¨éšªè©•åˆ†æ¼”ç®—æ³•è¨­è¨ˆ (å¾…å‰µå»º)
  - [ADR-013] ç•°å¸¸è¦å‰‡å¼•æ“æŠ€è¡“é¸å‹ (å¾…å‰µå»º)
  - [ADR-014] RAG æ¶æ§‹è¨­è¨ˆèˆ‡å‘é‡è³‡æ–™åº«é¸å‹ (å¾…å‰µå»º)
  - [ADR-015] æ··åˆæª¢ç´¢ç­–ç•¥ (Dense + Sparse) (å¾…å‰µå»º)
  - [ADR-016] AI Worker æ¶æ§‹è¨­è¨ˆ (å¾…å‰µå»º)
  - [ADR-017] WebSocket vs Server-Sent Events (å¾…å‰µå»º)

---

**ç¶­è­·è€…**: RespiraAlly Development Team / TaskMaster Hub
**å¯©æ ¸è€…**: Technical Lead, Product Manager, Architecture Team

**æœ€å¾Œæ›´æ–°**: 2025-10-23 19:50
