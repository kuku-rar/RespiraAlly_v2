# ADR-004: 採用 LINE 作為唯一的病患互動入口

---

**狀態 (Status):** `已接受 (Accepted)`

**決策者 (Deciders):** `[產品負責人, 技術負責人]`

**日期 (Date):** `2025-10-09`

---

## 1. 背景與問題陳述 (Context and Problem Statement)

*   **上下文 (Context):** `RespiraAlly` 是一款為 COPD 患者設計的數位健康管理工具，目標用戶平均年齡較高。為此類用戶選擇一個低門檻、高觸及率的互動平台至關重要。
*   **問題陳述 (Problem Statement):** 我們需要決定產品的主要使用者介面是獨立的原生 App (iOS/Android)、Web App，還是利用現有的超級應用 (Super App) 生態。此決策直接影響開發成本、使用者獲取難易度以及產品的迭代速度。
*   **驅動因素/約束條件 (Drivers / Constraints):**
    *   **驅動因素 1:** 目標用戶群：台灣中高齡族群對學習和安裝新 App 存在較高的心理和技術障礙。
    *   **驅動因素 2:** 觸及率：需要選擇一個在目標用戶群中已經廣泛使用的平台。
    *   **約束條件 1:** 專案資源有限，必須嚴格控制開發與維護成本。

## 2. 考量的選項 (Considered Options)

### 選項一：開發原生 App (iOS/Android)

*   **描述：** 為 iOS 和 Android 開發獨立的原生應用程式。
*   **優點 (Pros)：**
    *   **最佳性能與體驗**: 可充分利用手機硬體，提供最流暢的體驗。
    *   **功能完整**: 可實現背景推播、藍牙整合等所有原生功能。
*   **缺點 (Cons)：**
    *   **高門檻**: 病患需要主動搜尋、下載、安裝、註冊，流失率高。
    *   **開發成本極高**: 需要維護兩個平台的 App，成本高昂。
    *   **迭代速度慢**: 受 App Store 審核流程影響。
*   **成本/複雜度評估:** 開發與維護成本和複雜度極高。

### 選項二：開發響應式 Web App (RWD)

*   **描述：** 開發一個可在瀏覽器中運行的網站應用。
*   **優點 (Pros)：**
    *   **免安裝**: 門檻較低。
    *   **跨平台**: 一套程式碼適用所有設備。
*   **缺點 (Cons)：**
    *   **觸及困難**: 如何讓病患記住並主動訪問網址是個大問題。
    *   **推播能力受限**: Web Push 的用戶授權流程繁瑣且不穩定。
*   **成本/複雜度評估:** 開發成本中等，但用戶觸及和留存的營運成本高。

### 選項三：基於 LINE Platform 開發 (LINE Bot + LIFF)

*   **描述：** 利用 LINE 官方帳號作為入口，透過 LIFF (LINE Front-end Framework) 內嵌網頁應用來提供豐富功能。
*   **優點 (Pros)：**
    *   **極低門檻與高普及率**: 在台灣，LINE 是國民級應用，用戶只需加入官方帳號即可使用。
    *   **強大的訊息觸及能力**: 可透過 LINE 可靠地實現提醒功能。
    *   **身份驗證簡化**: 可直接利用 LINE 的用戶身份，無需額外註冊登入。
    *   **開發成本相對較低**: 主要為 Web 開發，比原生 App 更快、更便宜。
*   **缺點 (Cons)：**
    *   **平台綁定**: 產品完全依賴於 LINE Platform。
    *   **UI/UX 限制**: 所有介面都在 LINE 的框架內，自由度受限。
    *   **訊息費用**: 主動推播訊息 (Push API) 有成本。
*   **成本/複雜度評估:** 開發成本低，但有潛在的平台風險和營運費用。

---

## 3. 決策 (Decision Outcome)

**最終選擇的方案：** `選項三：基於 LINE Platform 開發 (LINE Bot + LIFF)`。

**選擇理由 (Rationale):**
對於我們「高齡友善」的產品定位，LINE 的高普及率和免安裝特性是壓倒性的優勢。它完美地解決了數位產品在觸及目標用戶時面臨的最大障礙。

此決策包含一個核心原則：**為了最大程度地簡化使用流程，病患將只透過 LINE 進行身份驗證，系統不會為病患設立獨立的帳號密碼。** 這從根本上消除了高齡用戶忘記密碼的痛點。雖然存在平台綁定的風險，但在專案的啟動和驗證階段，利用 LINE 的生態來快速獲取用戶和驗證產品價值，是最務實和高效的策略。

---

## 4. 決策的後果與影響 (Consequences)

*   **正面影響 / 預期收益：**
    *   大大降低病患的使用門檻，預期能提高用戶的初始接受度和留存率。
    *   **完全消除了病患忘記帳號密碼的問題**，降低了客服支援成本。
    *   開發團隊可以專注於 Web 技術 (FastAPI + React)，無需投入原生 App 開發。
    *   產品可以快速迭代，無需等待 App Store 審核。
*   **負面影響 / 引入的風險：**
    *   **平台依賴性**: 公司的業務與 LINE 深度綁定，需持續關注 LINE 開發者政策的變化。
    *   **未來擴展限制**: 未來若需整合藍牙血氧機等硬體，LIFF 的能力有限，屆時可能需重新評估開發原生 App。
    *   **國際化困難**: 此模式高度依賴 LINE 在特定市場的普及率。
*   **未來可能需要重新評估的觸發條件：**
    *   當核心功能需要藍牙等 LIFF 不支援的原生硬體互動時。
    *   當 LINE 平台的政策或收費模式發生重大不利變化時。
    *   當產品需要擴展到 LINE 不普及的國家/地區時。
