# ADR-004: 採用 LINE 作為唯一的病患互動入口

**狀態**: 已決定 (Accepted)

**日期**: 2025-10-09

## 背景 (Context)

在為 COPD 患者（平均年齡較高）設計數位健康管理工具時，選擇一個低門檻、高觸及率的互動平台至關重要。我們需要決定是開發獨立的原生 App (iOS/Android)、Web App，還是利用現有的超級應用 (Super App) 生態。

## 決策驅動力 (Decision Drivers)

*   **目標用戶群**: 台灣的 COPD 患者多為中高齡族群，他們對於學習和安裝新 App 可能存在較高的心理和技術障礙。
*   **觸及率與普及率**: 需要選擇一個在目標用戶群中已經廣泛使用的平台。
*   **開發與維護成本**: 專案資源有限，需要考慮跨平台開發、上架、更新的成本。
*   **核心功能需求**: 產品的核心是訊息提醒、表單填寫 (LIFF)、和簡單的圖文/語音互動，這些功能是否能被所選平台良好支持。

## 考量的方案 (Considered Options)

### 方案 1: 開發原生 App (iOS/Android)

*   **優點**:
    *   **最佳性能與體驗**: 可以充分利用手機硬體，提供最流暢的使用者體驗。
    *   **功能完整**: 可以實現所有手機原生功能，如背景推播、藍牙設備整合等。
    *   **品牌獨立性**: 擁有獨立的 App Store 入口，品牌形象更完整。
*   **缺點**:
    *   **高門檻**: 病患需要主動搜尋、下載、安裝並註冊一個新的 App，流失率高。
    *   **開發成本極高**: 需要分別或同時（使用跨平台框架）開發和維護兩個平台的 App。
    *   **上架與審核週期長**: App Store 的審核流程會拖慢迭代速度。

### 方案 2: 開發響應式 Web App (RWD)

*   **優點**:
    *   **免安裝**: 通過瀏覽器即可訪問，門檻較低。
    *   **跨平台**: 一套程式碼適用所有設備。
*   **缺點**:
    *   **觸及困難**: 如何讓病患記住並主動訪問一個網址是個大問題。
    *   **推播能力受限**: Web Push 的用戶授權流程繁瑣，且在 iOS 上的支援度不穩定。
    *   **整合度低**: 無法像原生 App 或 LINE 那樣與手機作業系統深度整合。

### 方案 3: 基於 LINE Platform 開發 (LINE Bot + LIFF) (最終選擇)

*   **優點**:
    *   **極低門檻與高普及率**: 在台灣，LINE 是國民級應用，特別是在中高齡族群中。用戶只需加入官方帳號即可開始使用，無需安裝任何新東西。
    *   **強大的訊息觸及能力**: 可以透過 LINE 的訊息通道主動觸及用戶，實現可靠的提醒功能。
    *   **LIFF 實現豐富互動**: LINE Front-end Framework (LIFF) 是一個內嵌的 Web App 框架，讓我們可以在 LINE 的環境中開發複雜的介面（如日誌表單、趨勢圖表），兼顧了 Web 開發的靈活性和類似 App 的體驗。
    *   **身份驗證簡化**: 可以直接利用 LINE 的用戶身份，簡化註冊和登入流程。
    *   **開發成本相對較低**: 主要開發工作集中在後端 Bot 邏輯和前端 LIFF 頁面，相較於原生 App 更快、更便宜。
*   **缺點**:
    *   **平台綁定**: 產品完全依賴於 LINE Platform 的政策和技術能力。如果未來 LINE 改變 API 政策或收費模式，我們將面臨風險。
    *   **UI/UX 限制**: 所有介面都必須在 LINE 的框架內呈現，自由度受限。
    *   **訊息費用**: 主動推播訊息 (Push API) 有成本考量。

## 決策 (Decision)

我們決定選擇 **方案 3: 採用 LINE 作為唯一的病患互動入口**。

對於我們高齡友善的產品定位，LINE 的高普及率和免安裝特性是壓倒性的優勢。它完美地解決了數位產品在觸及目標用戶時面臨的最大障礙。雖然存在平台綁定的風險，但在專案的啟動和驗證階段，利用 LINE 的生態來快速獲取用戶和驗證產品價值，是最務實和高效的策略。我們將優先使用免費的 Reply API，並監控 Push API 的用量來控制成本。

## 後果 (Consequences)

*   **正面**:
    *   大大降低了病患的使用門檻，預期能提高用戶的初始接受度和留存率。
    *   開發團隊可以專注於 Web 技術（FastAPI + React for LIFF），而無需投入資源在原生 App 開發上。
    *   產品可以快速迭代，無需等待 App Store 審核。
*   **負面**:
    *   **平台依賴性**: 公司的業務與 LINE 深度綁定，需要持續關注 LINE 開發者政策的變化。
    *   **未來擴展限制**: 如果未來需要整合藍牙血氧機等硬體設備，目前 LIFF 的能力有限，屆時可能需要重新考慮開發原生 App。
    *   **國際化困難**: 此模式高度依賴 LINE 在特定市場（如台灣、日本、泰國）的普及率，不利於快速向其他市場擴展。
