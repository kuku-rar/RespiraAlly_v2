# E2E 測試檢核清單 (End-to-End Test Checklist)

**專案**: RespiraAlly V2.0
**測試日期**: 2025-10-20
**測試範圍**: Sprint 2 Week 1 完成功能
**測試工具**: Playwright (建議) / Manual Testing

---

## 📋 測試準備

### 環境檢查
- [ ] **後端服務**: http://localhost:8000 運行中
- [ ] **Dashboard**: http://localhost:3000 運行中
- [ ] **LIFF**: http://localhost:5173 運行中
- [ ] **數據庫**: PostgreSQL 運行中
- [ ] **Mock 模式**: 可切換 (測試兩種模式)

### 測試數據準備
- [ ] **測試治療師帳號**: test.therapist@example.com / SecurePass123!
- [ ] **測試病患帳號**: test.patient@example.com
- [ ] **Mock 病患數據**: 8 筆病患資料
- [ ] **Mock 日誌數據**: 3 筆日誌資料

---

## 🎯 E2E 測試場景

### 場景 1: 治療師登入與病患列表查看

#### 步驟
1. **訪問 Dashboard 登入頁**
   - [ ] 打開 http://localhost:3000/login
   - [ ] 頁面正常顯示登入表單
   - [ ] Mock 模式提示顯示

2. **輸入登入資訊**
   - [ ] Email 輸入框可點擊
   - [ ] 輸入: therapist@test.com
   - [ ] Password 輸入框可點擊
   - [ ] 輸入: Test123!

3. **表單驗證**
   - [ ] Email 格式錯誤時顯示錯誤
   - [ ] 密碼為空時顯示錯誤
   - [ ] 錯誤提示清晰可見 (紅色 + emoji)

4. **提交登入**
   - [ ] 點擊「登入」按鈕
   - [ ] 顯示「登入中...」狀態
   - [ ] 800ms 後跳轉到 Dashboard

5. **查看 Dashboard**
   - [ ] URL 變更為 /dashboard
   - [ ] 顯示「歡迎回來」訊息
   - [ ] 統計卡片正常顯示
   - [ ] 快捷操作按鈕可見

6. **導航到病患列表**
   - [ ] 點擊「病患管理」按鈕
   - [ ] URL 變更為 /patients
   - [ ] 顯示「共 8 位病患」

7. **查看病患列表**
   - [ ] 8 筆病患資料正常顯示
   - [ ] 表格欄位完整 (姓名、性別、年齡、BMI...)
   - [ ] BMI 顏色標記正確
   - [ ] Hover 效果正常 (藍色背景)

8. **測試篩選功能**
   - [ ] 點擊「展開篩選」
   - [ ] 篩選選項完整顯示
   - [ ] 選擇「排序：年齡」
   - [ ] 列表重新排序

9. **點擊病患查看詳情**
   - [ ] 點擊第一位病患 (王小明)
   - [ ] URL 變更為 /patients/[id]
   - [ ] 顯示病患詳細資訊

#### 預期結果
- ✅ 所有步驟順利完成
- ✅ 無錯誤提示
- ✅ 互動流暢，無明顯延遲
- ✅ URL 變更正確
- ✅ 數據顯示正確

#### 時間
- 預估: 3-5 分鐘

---

### 場景 2: LIFF 病患註冊流程

#### 步驟
1. **訪問 LIFF 首頁**
   - [ ] 打開 http://localhost:5173
   - [ ] 頁面正常顯示
   - [ ] Mock LIFF 初始化成功

2. **檢查註冊狀態**
   - [ ] 如果未註冊，顯示註冊頁面
   - [ ] 如果已註冊，顯示首頁

3. **清除註冊狀態 (測試用)**
   - [ ] 打開瀏覽器開發者工具
   - [ ] 清除 localStorage
   - [ ] 重新載入頁面
   - [ ] 顯示註冊頁面

4. **查看 LINE Profile 自動填入**
   - [ ] 頁面顯示 LINE 頭像
   - [ ] 姓名欄位自動填入 "Mock 使用者"
   - [ ] LINE User ID 顯示

5. **填寫註冊表單**
   - [ ] 出生日期: 選擇 1960-01-01
   - [ ] 性別: 點擊「♂️ 男」按鈕
   - [ ] 按鈕變為綠色邊框
   - [ ] COPD 分期: 選擇「Stage 3」
   - [ ] 身高: 輸入 170
   - [ ] 體重: 輸入 70
   - [ ] 電話: 輸入 0912345678

6. **表單驗證**
   - [ ] 必填欄位為空時無法提交
   - [ ] 數值範圍錯誤時顯示提示
   - [ ] 電話格式錯誤時顯示提示

7. **提交註冊**
   - [ ] 點擊「完成註冊」按鈕
   - [ ] 顯示「註冊中...」狀態
   - [ ] 1000ms 後顯示成功訊息
   - [ ] 自動跳轉到首頁

8. **查看首頁**
   - [ ] 顯示「歡迎回來！👋」
   - [ ] 顯示「記錄今日健康日誌」按鈕
   - [ ] 顯示「登出（測試用）」按鈕

#### 預期結果
- ✅ 所有步驟順利完成
- ✅ 表單驗證正確
- ✅ LINE Profile 自動填入
- ✅ 註冊成功並跳轉

#### 時間
- 預估: 4-6 分鐘

---

### 場景 3: LIFF 每日日誌提交

#### 步驟
1. **從首頁導航到日誌表單**
   - [ ] 點擊「📝 記錄今日健康日誌」按鈕
   - [ ] 頁面切換到日誌表單
   - [ ] Header 顯示「📝 每日健康日誌」

2. **檢查預設值**
   - [ ] 日期預設為今天
   - [ ] 用藥狀態預設「未服藥」(灰色)
   - [ ] 其他欄位為空

3. **填寫日誌表單**
   - [ ] 日期: 保持今天
   - [ ] 用藥狀態: 點擊 Toggle 切換為「已服藥」(綠色)
   - [ ] Toggle 動畫流暢
   - [ ] 飲水量: 輸入 2000
   - [ ] 步數: 輸入 5000
   - [ ] 心情: 點擊 😊「好」按鈕
   - [ ] 按鈕變為綠色邊框
   - [ ] 症狀: 輸入「輕微咳嗽，無其他不適」

4. **表單驗證測試**
   - [ ] 飲水量輸入 -100 → 顯示錯誤
   - [ ] 飲水量輸入 20000 → 顯示錯誤
   - [ ] 步數輸入 200000 → 顯示錯誤
   - [ ] 症狀超過 500 字 → 顯示錯誤
   - [ ] 字數計數器正常 (0 / 500)

5. **提交日誌**
   - [ ] 修正錯誤後，點擊「📝 提交日誌」按鈕
   - [ ] 按鈕變為「提交中...」
   - [ ] 禁用狀態正確
   - [ ] 600-1200ms 後顯示成功訊息

6. **查看成功訊息**
   - [ ] 綠色背景 + ✅ 圖示
   - [ ] 顯示「提交成功！」
   - [ ] 顯示「您的健康日誌已記錄」
   - [ ] 動畫效果正常

7. **表單重置**
   - [ ] 2 秒後表單自動重置
   - [ ] 飲水量、步數、症狀清空
   - [ ] 日期保持今天
   - [ ] 用藥狀態重置為「未服藥」

8. **再次提交測試**
   - [ ] 填寫不同數據
   - [ ] 提交成功
   - [ ] 無錯誤

#### 預期結果
- ✅ 所有步驟順利完成
- ✅ Toggle 開關互動流暢
- ✅ 表單驗證正確
- ✅ 提交成功並重置

#### 時間
- 預估: 5-7 分鐘

---

### 場景 4: 病患列表進階功能

#### 步驟
1. **測試排序功能**
   - [ ] 打開病患列表
   - [ ] 排序選擇「姓名（A-Z）」→ 列表重新排序
   - [ ] 排序選擇「年齡（高→低）」→ 列表重新排序
   - [ ] 排序選擇「BMI」→ 列表重新排序

2. **測試篩選功能**
   - [ ] 點擊「展開篩選」
   - [ ] 風險等級: 選擇「高風險」
   - [ ] 依從率: 輸入 70
   - [ ] 最後活動: 選擇 2025-10-18
   - [ ] 點擊「套用篩選」
   - [ ] 顯示「已套用篩選」標籤

3. **測試重置功能**
   - [ ] 點擊「重置篩選」
   - [ ] 所有篩選條件清空
   - [ ] 列表顯示所有病患
   - [ ] 「已套用篩選」標籤消失

4. **測試分頁功能**
   - [ ] 查看分頁資訊「顯示 1-8 筆，共 8 筆 | 第 1/1 頁」
   - [ ] 「上一頁」按鈕禁用 (第一頁)
   - [ ] 「下一頁」按鈕禁用 (無下頁)

5. **測試刷新功能**
   - [ ] 點擊「🔄 重新整理」按鈕
   - [ ] 顯示「載入中...」
   - [ ] 數據重新載入
   - [ ] 列表正常顯示

6. **測試響應式設計**
   - [ ] 縮小瀏覽器視窗
   - [ ] 表格水平滾動正常
   - [ ] 所有按鈕可見且可點擊
   - [ ] 字體大小適中

#### 預期結果
- ✅ 排序功能正常
- ✅ 篩選功能正常
- ✅ 分頁資訊正確
- ✅ 響應式設計良好

#### 時間
- 預估: 6-8 分鐘

---

### 場景 5: 跨頁面導航與狀態管理

#### 步驟
1. **測試認證狀態**
   - [ ] 未登入時訪問 /dashboard → 跳轉到 /login
   - [ ] 未登入時訪問 /patients → 跳轉到 /login
   - [ ] 登入後可正常訪問所有頁面

2. **測試 Token 管理**
   - [ ] 打開開發者工具 → Application → Local Storage
   - [ ] 登入後 token 正確儲存
   - [ ] 登出後 token 正確清除

3. **測試頁面導航**
   - [ ] Dashboard → 病患列表 → 病患詳情
   - [ ] 病患詳情 → 返回病患列表
   - [ ] 病患列表 → 返回 Dashboard
   - [ ] 所有導航正常，無白屏

4. **測試瀏覽器前進/後退**
   - [ ] 點擊瀏覽器「返回」按鈕
   - [ ] 頁面正確返回上一頁
   - [ ] 數據狀態保持
   - [ ] 點擊「前進」按鈕
   - [ ] 頁面正確前進

5. **測試頁面重新載入**
   - [ ] 在病患列表頁按 F5 重新載入
   - [ ] 頁面正確重新載入
   - [ ] 認證狀態保持
   - [ ] 數據重新獲取

#### 預期結果
- ✅ 認證保護正常
- ✅ Token 管理正確
- ✅ 頁面導航流暢
- ✅ 瀏覽器操作正常

#### 時間
- 預估: 4-6 分鐘

---

## 📊 Elder-First 設計驗證

### 字體大小測試
- [ ] 所有正文文字 ≥ 18px
- [ ] 所有標題 ≥ 24px
- [ ] 所有按鈕文字 ≥ 18px
- [ ] 所有輸入框文字 ≥ 18px

### 觸控目標測試
- [ ] 所有按鈕 ≥ 44px × 44px
- [ ] 所有輸入框 ≥ 44px 高度
- [ ] 所有點擊區域 ≥ 44px
- [ ] Toggle 開關 ≥ 56px

### 對比度測試
- [ ] 主文字 vs 背景對比度 ≥ 7:1 (WCAG AAA)
- [ ] 按鈕文字 vs 背景對比度 ≥ 4.5:1 (WCAG AA)
- [ ] 禁用狀態清晰可見
- [ ] Hover 效果清晰可見

### Emoji 輔助測試
- [ ] 所有關鍵功能有 emoji 輔助
- [ ] Emoji 大小適中 (48px-64px)
- [ ] Emoji 與文字搭配協調

---

## 🧪 Mock 模式測試

### Mock API 測試
- [ ] 所有 API 調用顯示 `[MOCK]` 日誌
- [ ] API 延遲模擬正常 (600-1200ms)
- [ ] Mock 數據真實且完整
- [ ] Console 無錯誤訊息

### Mock 模式指示
- [ ] 所有頁面顯示 Mock 模式提示
- [ ] 提示文字清晰易懂
- [ ] 提示樣式統一 (黃色背景)

---

## 📱 響應式設計測試

### 桌面端 (1920×1080)
- [ ] 所有頁面正常顯示
- [ ] 表格寬度適中
- [ ] 無水平滾動 (除表格內容)

### 平板端 (768×1024)
- [ ] 所有頁面正常顯示
- [ ] 表格可水平滾動
- [ ] 按鈕大小適中

### 手機端 (375×667)
- [ ] 所有頁面正常顯示
- [ ] 表格可水平滾動
- [ ] 輸入框適配螢幕寬度
- [ ] 按鈕堆疊顯示 (非橫向)

---

## 🔍 瀏覽器相容性測試

### Chrome
- [ ] 所有功能正常
- [ ] 無 Console 錯誤
- [ ] 樣式正確

### Firefox
- [ ] 所有功能正常
- [ ] 無 Console 錯誤
- [ ] 樣式正確

### Safari
- [ ] 所有功能正常
- [ ] 無 Console 錯誤
- [ ] 樣式正確

---

## 📈 性能測試

### 頁面載入時間
- [ ] Dashboard 首次載入 < 2 秒
- [ ] LIFF 首次載入 < 2 秒
- [ ] 病患列表載入 < 3 秒

### 互動響應時間
- [ ] 按鈕點擊響應 < 100ms
- [ ] 輸入框輸入響應 < 50ms
- [ ] 頁面切換 < 500ms

### Network 檢查
- [ ] 無不必要的 API 重複調用
- [ ] 圖片資源壓縮適當
- [ ] 無 404 錯誤

---

## ✅ 測試完成標準

### 功能完整性
- [ ] 所有測試場景通過
- [ ] 所有功能可用
- [ ] 無阻礙性 Bug

### 設計合規性
- [ ] Elder-First 設計 100% 合規
- [ ] 無可訪問性問題
- [ ] 無樣式錯誤

### 性能要求
- [ ] 所有頁面載入時間達標
- [ ] 互動響應流暢
- [ ] 無明顯延遲

### 代碼品質
- [ ] TypeScript 無型別錯誤
- [ ] Console 無錯誤/警告
- [ ] ESLint 無警告

---

## 📝 測試紀錄

### 測試執行
- **測試人員**: _____________________
- **測試日期**: _____________________
- **測試時長**: _____ 分鐘
- **瀏覽器**: _____________________
- **作業系統**: _____________________

### 測試結果
- **通過場景**: _____ / 5
- **通過項目**: _____ / 75+
- **發現 Bug**: _____
- **嚴重程度**: P0 ___ | P1 ___ | P2 ___

### Bug 記錄
| # | 描述 | 嚴重程度 | 頁面 | 重現步驟 |
|---|------|----------|------|----------|
| 1 |  |  |  |  |
| 2 |  |  |  |  |

---

## 🚀 下一步

### 通過標準
- ✅ 所有測試場景通過
- ✅ 無 P0/P1 級別 Bug
- ✅ Elder-First 設計合規
- ✅ 性能指標達標

### 後續行動
1. **Playwright 自動化**: 將手動測試轉為自動化腳本
2. **CI/CD 整合**: 每次提交自動執行 E2E 測試
3. **真實環境測試**: 部署到測試環境進行真實 API 測試
4. **用戶驗收測試**: 邀請真實用戶進行測試

---

**文件版本**: v1.0
**最後更新**: 2025-10-20
**維護者**: Frontend Developer / TaskMaster Hub
