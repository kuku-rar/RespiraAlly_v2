# Coordination 協調機制目錄

此目錄管理 Subagent 之間的協調機制，包括任務交接和衝突解決記錄。

## 目錄結構

```
coordination/
├── handoffs/     # Agent 間任務交接記錄
└── conflicts/    # 衝突解決與決策記錄
```

## handoffs/ 目錄

### 用途
記錄 Agent 間的任務交接過程，確保工作的連續性和完整性。

### 檔案命名
格式: `handoff-{from-agent}-to-{to-agent}-{YYYY-MM-DD-HHMM}.md`
範例: `handoff-code-quality-specialist-to-test-automation-engineer-2025-09-23-1530.md`

### 常見交接場景

#### 1. 品質檢查 → 測試執行
- **觸發**: code-quality-specialist 發現需要補強測試的程式碼
- **交接內容**: 問題程式碼位置、建議測試案例、測試策略
- **期望結果**: test-automation-engineer 補強相關測試

#### 2. 測試完成 → E2E 驗證
- **觸發**: test-automation-engineer 完成單元測試
- **交接內容**: 測試覆蓋範圍、需要 E2E 驗證的功能
- **期望結果**: e2e-validation-specialist 執行端到端驗證

#### 3. 安全檢查 → 部署準備
- **觸發**: security-infrastructure-auditor 完成安全檢查
- **交接內容**: 安全檢查結果、部署安全配置要求
- **期望結果**: deployment-operations-engineer 按安全要求部署

#### 4. 部署完成 → 文檔更新
- **觸發**: deployment-operations-engineer 完成部署
- **交接內容**: 部署變更、新功能說明、配置變更
- **期望結果**: documentation-specialist 更新相關文檔

### 交接流程
1. **發起交接**: 來源 Agent 建立交接記錄
2. **資訊傳遞**: 提供完整的背景和期望結果
3. **接收確認**: 目標 Agent 確認接收和理解
4. **執行工作**: 目標 Agent 執行相關工作
5. **結果回報**: 記錄執行結果和後續建議

## conflicts/ 目錄

### 用途
記錄 Agent 間的意見衝突和主 Agent 的決策過程。

### 檔案命名
格式: `conflict-{YYYY-MM-DD-HHMM}-{簡要描述}.md`
範例: `conflict-2025-09-23-1530-testing-strategy-disagreement.md`

### 衝突類型

#### 1. 技術選型衝突
- **場景**: 不同 Agent 對技術選擇有不同建議
- **處理**: 主 Agent 基於架構考量做最終決策
- **記錄**: 各方觀點、決策理由、實施計劃

#### 2. 優先級衝突
- **場景**: 多個 Agent 都認為自己的任務最重要
- **處理**: 主 Agent 基於業務價值和風險評估
- **記錄**: 優先級排序理由、資源分配決策

#### 3. 標準衝突
- **場景**: 不同領域的最佳實踐產生衝突
- **處理**: 主 Agent 制定統一標準或例外處理
- **記錄**: 標準制定過程、例外情況處理

#### 4. 資源衝突
- **場景**: 多個 Agent 需要相同的資源或工具
- **處理**: 主 Agent 協調資源分配和使用時程
- **記錄**: 資源分配方案、協調結果

### 衝突解決流程
1. **衝突識別**: Agent 發現意見不一致時上報
2. **資訊收集**: 主 Agent 收集各方觀點和論據
3. **影響評估**: 分析不同選擇的業務和技術影響
4. **決策制定**: 基於整體考量做出決策
5. **執行監控**: 監控決策執行效果
6. **後續檢討**: 定期檢討決策是否需要調整

## 協調原則

### 透明度原則
- 所有交接和衝突都要有明確記錄
- 決策過程和理由都要公開透明
- 相關 Agent 都能查閱相關記錄

### 效率原則
- 簡化不必要的交接流程
- 建立標準化的協調機制
- 避免過度的官僚程序

### 學習原則
- 從協調過程中學習改善點
- 建立協調最佳實踐
- 持續優化協調機制

## 監控與改善

### 協調效率指標
- 交接完成時間
- 衝突解決時間
- Agent 協作滿意度
- 重複衝突頻率

### 定期檢討
- 月度協調效率檢討
- 季度協調機制優化
- 年度協調策略調整

### 持續改善
- 基於指標數據優化流程
- 收集 Agent 協作回饋
- 引入新的協調工具和方法

---

良好的協調機制是 Subagent 系統成功的關鍵，確保各個專業 Agent 能夠有效協作，產生最佳的整體效果。